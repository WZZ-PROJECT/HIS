webpackJsonp([4],{"91Mn":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("mtWM"),i=a.n(n),s=a("jNDk"),r=a("l2P9"),o={components:{},data:function(){return{src:"",name:"",role:"",specialty:"",price:"",dept:"",staffId:this.$route.query.staffId,patientId:localStorage.patientId,skdList:{},skdAmList:[],skdPmList:[],timeArr1:[],flag:!1,popup1:!0,popup2:!1,att:"",skdId:"",date:""}},created:function(){var t,e,a=this;(t=this.staffId,e=this.patientId,i()({url:"/api/staff/listDoctor?staffId="+t+"&patientId="+e,method:"get"})).then(function(t){if(console.log(t.data.data),a.name=t.data.data.staffName,a.role=t.data.data.title,a.dept=t.data.data.deptName,a.specialty=t.data.data.advantages,a.skdList=t.data.data.skdList,a.att=t.data.data.state,a.src=t.data.data.picture,void 0!==a.skdList&&null!==a.skdList&&0!==a.skdList.length)for(var e=0;e<a.skdList.length;e++)0==a.skdList[e].noon?a.skdAmList.push(a.skdList[e]):a.skdPmList.push(a.skdList[e]);else a.$toast("未获取到排班信息！")})},methods:{filter:function(t,e){return"minute"===t?e.filter(function(t){return t%5==0}):e},onReturn:function(){history.back()},toFive:function(t,e){this.$router.push({path:"/appointment/five",query:{skdId:this.skdId,staffId:this.staffId,patientId:this.patientId,time:t,date:this.date,deptId:this.$route.query.deptId}})},yuyue:function(t,e,a){var n=this;this.date=a,this.flag=!0,this.skdId=e,1==t?(this.popup1=!1,this.popup2=!0):(this.popup1=!0,this.popup2=!1),Object(r.a)(e,a,t).then(function(t){n.timeArr1=t.data.data})},attention:function(t){var e=this,a={staffId:this.staffId,patientId:this.patientId};Object(s.a)(a).then(function(t){"关注成功"===t.data.data&&(e.att="已关注",e.$toast("关注成功"))})},toPatientIntroduce:function(){this.$router.push({path:"/appointment/patientIntroduce",query:{staffId:this.staffId,patientId:this.patientId}})},handleDateConfirm:function(){var t=this;this.popup1=!1,this.popup2=!1,this.$nextTick(function(){t.$router.push("/appointment/five")})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"footer"},[a("van-row",{attrs:{type:"flex",justify:"space-between"}},[a("van-col",{attrs:{span:"10"}},[a("div",{staticStyle:{"margin-left":"1rem"}},[a("div",{staticStyle:{"margin-top":"1rem"}},[a("span",{staticStyle:{"font-size":"1.3rem","font-weight":"bold"}},[t._v(t._s(t.name))]),t._v(" "),a("span",{staticStyle:{"font-size":"0.8rem",color:"#adadad"}},[t._v(t._s(t.role))])]),t._v(" "),a("div",{staticStyle:{"font-size":"0.8rem",color:"#adadad"}},[t._v(t._s(t.dept))])])]),t._v(" "),a("van-col",{staticStyle:{"margin-left":"5rem"},attrs:{span:"6"}},[a("div",{staticStyle:{"margin-top":"0.3rem"}},[a("van-image",{attrs:{width:"4.5rem",height:"4.5rem",src:t.src}})],1)])],1),t._v(" "),a("van-row",{staticStyle:{padding:"0.3rem 1rem 0"},attrs:{type:"flex",justify:"space-between"}},[a("van-col",{attrs:{span:"6"}},[a("a",{staticStyle:{color:"#f1c232","font-size":"0.8rem"},on:{click:function(e){return t.toPatientIntroduce()}}},[t._v("医生介绍")])]),t._v(" "),a("van-col",{staticStyle:{"text-align":"center"},attrs:{span:"6"}},[a("button",{staticStyle:{"background-color":"#f1c232","font-size":"0.8rem",border:"none",outlin:"none",padding:"0.3rem 1rem","border-radius":"16px",color:"#fff"},on:{click:function(e){return t.attention(t.att)}}},[t._v("\n          "+t._s(0==t.att?"+关注":"已关注")+"\n        ")])])],1),t._v(" "),a("van-row",[a("div",{staticClass:"van-ellipsis",staticStyle:{"font-size":"0.8rem",margin:"0.3rem 1rem 0.3rem 1rem",color:"#adadad"}},[t._v("\n        "+t._s(t.specialty)+"\n      ")])])],1),t._v(" "),a("hr"),t._v(" "),t._m(0),t._v(" "),a("van-row",[a("van-col",{attrs:{span:"12"}},t._l(t.skdAmList,function(e,n){return a("div",{key:n,staticStyle:{"margin-left":"1rem"}},[a("div",{staticStyle:{"font-size":"0.8rem","line-height":"30px"}},[a("b",[t._v(t._s(e.date)+" "+t._s(e.week))])]),t._v(" "),a("van-button",{class:0==e.remain?"btnOrange":"btnGrey",attrs:{round:"",disabled:0!=e.remain},on:{click:function(a){return t.yuyue(e.noon,e.skdId,e.date)}}},[a("div",[a("label",{class:"0"==e.remain?"orange":"grey"},[t._v(t._s(0==e.noon?"上午":"下午")+"\n              "+t._s(0==e.remain?"预约":"约满")+"\n              "+t._s(e.amount)+"¥")])])])],1)}),0),t._v(" "),a("van-col",{attrs:{span:"12"}},t._l(t.skdPmList,function(e,n){return a("div",{key:n,staticStyle:{"margin-left":"1rem"}},[a("div",{staticStyle:{"font-size":"0.8rem","line-height":"30px"}},[a("b",[t._v(t._s(e.date)+" "+t._s(e.week))])]),t._v(" "),a("van-button",{class:0==e.remain?"btnOrange":"btnGrey",attrs:{round:"",disabled:0!=e.remain},on:{click:function(a){return t.yuyue(e.noon,e.skdId,e.date)}}},[a("div",[a("label",{class:"0"==e.remain?"orange":"grey"},[t._v(t._s(0==e.noon?"上午":"下午")+"\n              "+t._s(0==e.remain?"预约":"约满")+"\n              "+t._s(e.amount)+"¥")])])]),t._v(" "),a("van-popup",{style:{height:"80%",width:"100%"},attrs:{position:"bottom",overlay:!0,closeable:""},model:{value:t.flag,callback:function(e){t.flag=e},expression:"flag"}},[a("label",{staticStyle:{display:"inline-block",padding:"10px 0","text-align":"center",width:"100%"}},[t._v("选择要预约的时间段")]),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"margin-left":"0.1rem"}}),t._v(" "),t.popup1?a("div",{staticStyle:{"text-align":"left"}},[a("table",{staticClass:"myTable"},[a("van-row",t._l(t.timeArr1,function(n,i){return a("van-col",{key:i,staticStyle:{"text-align":"center","margin-bottom":"9px"},attrs:{span:"8"}},[a("van-button",{attrs:{round:"",color:"grey"},on:{click:function(a){return t.toFive(n,e.date)}}},[t._v(t._s(n))])],1)}),1)],1)]):t._e(),t._v(" "),t.popup2?a("div",{staticStyle:{"text-align":"left"}},[a("table",{staticClass:"myTable"},[a("van-row",t._l(t.timeArr1,function(n,i){return a("van-col",{key:i,staticStyle:{"text-align":"center","margin-bottom":"9px"},attrs:{span:"8"}},[a("van-button",{attrs:{round:"",color:"grey"},on:{click:function(a){return t.toFive(n,e.date)}}},[t._v(t._s(n))])],1)}),1)],1)]):t._e()])],1)}),0)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{"margin-left":"1rem","text-align":"left"}},[e("label",{staticStyle:{"font-size":"1.5rem"}},[this._v("预约挂号")])])}]};var l=a("VU/8")(o,d,!1,function(t){a("LVoR")},"data-v-560919ac",null);e.default=l.exports},LVoR:function(t,e){},jNDk:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var n=a("mtWM"),i=a.n(n),s=function(t){return i()({url:"/api/staff/attentionStaff",method:"post",data:t})}},l2P9:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var n=a("mtWM"),i=a.n(n),s=function(t,e,a){return i()({url:"/api/registration/TimeDifference?ruletime="+e+"&skdId="+t+"&noon="+a,method:"get"})}}});
//# sourceMappingURL=4.dd7a333351fdc750699f.js.map