{"remainingRequest":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\XM\\his-shopping-h5\\src\\views\\login\\register-submit\\index.vue?vue&type=style&index=0&id=1d538596&lang=scss&scoped=true&","dependencies":[{"path":"E:\\XM\\his-shopping-h5\\src\\views\\login\\register-submit\\index.vue","mtime":1606186248939},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import '../../../assets/scss/mixin';\r\n\r\n.register_submit {\r\n  padding-top: 40px;\r\n  background-color: #fff;\r\n}\r\n\r\n.register_submit_btn {\r\n  padding-top: 30px;\r\n}\r\n\r\n.getCode {\r\n  @include one-border(left);\r\n  text-align: center;\r\n}\r\n\r\n.time_down {\r\n  color: $red;\r\n}\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/login/register-submit","sourcesContent":["<template>\r\n\t<md-field-group class=\"register_submit\">\r\n\t\t<md-field v-model=\"code\" icon=\"mobile\" placeholder=\"请输入验证码\">\r\n\t\t\t<div slot=\"rightIcon\" @click=\"getCode\" class=\"getCode red\">\r\n\t\t\t\t<countdown v-if=\"counting\" :time=\"60000\" @end=\"countDownEnd\">\r\n\t\t\t\t  <template slot-scope=\"props\">{{ +props.seconds || 60 }}秒后获取</template>\r\n\t\t\t\t</countdown>\r\n\t\t\t\t<span v-else>获取验证码</span>\r\n\t\t\t</div>\r\n\t\t</md-field>\r\n\t\t<md-field v-model=\"username\" icon=\"username\" placeholder=\"请输入用户名\"/>\r\n\t\t<md-field v-model=\"password\" icon=\"lock\" placeholder=\"请输入密码\"/>\r\n\t\t<md-field v-model=\"repeatPassword\" icon=\"lock\" placeholder=\"请再次确认密码\"/>\r\n\r\n\t\t<div class=\"register_submit_btn\">\r\n\t\t\t<van-button type=\"danger\" size=\"large\" @click=\"registerSubmit\">确定</van-button>\r\n\t\t</div>\r\n\t</md-field-group>\r\n</template>\r\n\r\n<script>\r\nimport field from '@/components/field/';\r\nimport fieldGroup from '@/components/field-group/';\r\nimport { authRegisterCaptcha } from '@/api/api';\r\nimport { authRegister } from '@/api/api';\r\nimport {Toast} from \"vant\";\r\n\r\nexport default {\r\n\tprops: {\r\n\t\tphone: String\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t  counting: true,\r\n\t\t  code: '',\r\n\t\t  username: '',\r\n\t\t  password: '',\r\n\t\t  repeatPassword: ''\r\n\t\t};\r\n\t},\r\n\tmounted:function(){\r\n\t\tthis.getCode();\r\n\t},\r\n\r\n  methods: {\r\n    registerSubmit() {\r\n      if(this.username === '' || this.code === ''){\r\n        return\r\n      }\r\n      if(this.password === '' || this.repeatPassword === ''){\r\n        return\r\n      }\r\n      if(this.password !== this.repeatPassword){\r\n        this.password = ''\r\n        this.repeatPassword = ''\r\n        return\r\n      }\r\n      let data = this.getRegisterData();\r\n      authRegister(data).then(res => {\r\n        this.$router.push({\r\n          name: 'registerStatus',\r\n          params: { status: 'success' }\r\n        });\r\n      }).catch (error => {\r\n        Toast.fail(error.data.errmsg);\r\n        if (error.data.errno == 705) {\r\n          window.location = '#/login/';\r\n        }\r\n      });\r\n    },\r\n\r\n    getCode() {\r\n      this.counting = true;\r\n      let data = {\r\n        mobile: this.phone\r\n      };\r\n      authRegisterCaptcha(data).then(res => {\r\n        this.counting = true;\r\n      }).catch(error => {\r\n        alert(error.data.errmsg);\r\n        this.counting = true;\r\n      });\r\n    },\r\n\r\n    getRegisterData() {\r\n      const password = this.password;\r\n      const code = this.code;\r\n      const repeatPassword = this.repeatPassword;\r\n      const mobile = this.phone;\r\n      const username = this.username;\r\n      return {\r\n        code: code,\r\n        username: username,\r\n        password: password,\r\n        repeatPassword: repeatPassword,\r\n        mobile: mobile\r\n      };\r\n    },\r\n\r\n    countDownEnd() {\r\n      this.counting = false;\r\n    }\r\n  },\r\n\r\n  components: {\r\n    [field.name]: field,\r\n    [fieldGroup.name]: fieldGroup\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../../assets/scss/mixin';\r\n\r\n.register_submit {\r\n  padding-top: 40px;\r\n  background-color: #fff;\r\n}\r\n\r\n.register_submit_btn {\r\n  padding-top: 30px;\r\n}\r\n\r\n.getCode {\r\n  @include one-border(left);\r\n  text-align: center;\r\n}\r\n\r\n.time_down {\r\n  color: $red;\r\n}\r\n</style>\r\n"]}]}