{"remainingRequest":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\XM\\his-shopping-h5\\src\\views\\user\\user-information-set\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\XM\\his-shopping-h5\\src\\views\\user\\user-information-set\\index.vue","mtime":1606186248951},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { Uploader, Picker, Popup, Button } from 'vant';\r\nimport { removeLocalStorage } from '@/utils/local-storage';\r\nimport { getLocalStorage } from '@/utils/local-storage';\r\nimport { authInfo, authLogout, authProfile } from '@/api/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      sexColumns: [\r\n        {\r\n          values: ['保密', '男', '女'],\r\n          defaultIndex: 0\r\n        }\r\n      ],\r\n      showSex: false,\r\n      avatar: '',\r\n      nickName: '',\r\n      gender: 0,\r\n      mobile: ''\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    genderText() {\r\n      const text = ['保密', '男', '女'];\r\n      return text[this.gender] || '';\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.getUserInfo();\r\n  },\r\n\r\n  methods: {\r\n    avatarAfterRead(file) {\r\n      console.log(file);\r\n      this.avatar = file.content;\r\n    },\r\n    onSexConfirm(value, index) {\r\n      this.showSex = false;\r\n    },\r\n    getUserInfo() {\r\n      authInfo().then(res => {\r\n        this.avatar = res.data.data.avatar;\r\n        this.nickName = res.data.data.nickName;\r\n        this.gender = res.data.data.gender;\r\n        this.mobile = res.data.data.mobile;\r\n      })\r\n    },\r\n    loginOut() {\r\n      authLogout().then(res => {\r\n        removeLocalStorage('Authorization')\r\n        removeLocalStorage('avatar')\r\n        removeLocalStorage('nickName')\r\n        this.$router.push({ name: 'home' });\r\n      });\r\n\r\n    }\r\n  },\r\n\r\n  components: {\r\n    [Button.name]: Button,\r\n    [Uploader.name]: Uploader,\r\n    [Picker.name]: Picker,\r\n    [Popup.name]: Popup\r\n  }\r\n};\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/user/user-information-set","sourcesContent":["<template>\r\n  <div class=\"user_information\">\r\n    <van-cell-group>\r\n      <van-cell title=\"头像\" class=\"cell_middle\">\r\n        <van-uploader :afterRead=\"avatarAfterRead\">\r\n          <div class=\"user_avatar_upload\">\r\n            <img\r\n              :src=\"avatar\"\r\n              alt=\"你的头像\"\r\n              v-if=\"avatar\"\r\n            >\r\n            <van-icon name=\"camera_full\" v-else></van-icon>\r\n          </div>\r\n        </van-uploader>\r\n      </van-cell>\r\n\r\n      <van-cell title=\"昵称\" to=\"/user/information/setNickname\" :value=\"nickName\" isLink/>\r\n      <van-cell title=\"性别\" :value=\"genderText\" @click=\"showSex = true\" isLink/>\r\n      <van-cell title=\"密码设置\" to=\"/user/information/setPassword\" isLink/>\r\n      <van-cell title=\"手机号\" to=\"/user/information/setMobile\" :value=\"mobile\" isLink></van-cell>\r\n    </van-cell-group>\r\n\r\n    <van-button size=\"large\" class=\"user_quit\" @click=\"loginOut\">退出当前账户</van-button>\r\n\r\n    <van-popup v-model=\"showSex\" position=\"bottom\">\r\n      <van-picker\r\n        showToolbar\r\n        :columns=\"sexColumns\"\r\n        title=\"选择性别\"\r\n        @cancel=\"showSex = false\"\r\n        @confirm=\"onSexConfirm\"\r\n      />\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Uploader, Picker, Popup, Button } from 'vant';\r\nimport { removeLocalStorage } from '@/utils/local-storage';\r\nimport { getLocalStorage } from '@/utils/local-storage';\r\nimport { authInfo, authLogout, authProfile } from '@/api/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      sexColumns: [\r\n        {\r\n          values: ['保密', '男', '女'],\r\n          defaultIndex: 0\r\n        }\r\n      ],\r\n      showSex: false,\r\n      avatar: '',\r\n      nickName: '',\r\n      gender: 0,\r\n      mobile: ''\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    genderText() {\r\n      const text = ['保密', '男', '女'];\r\n      return text[this.gender] || '';\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.getUserInfo();\r\n  },\r\n\r\n  methods: {\r\n    avatarAfterRead(file) {\r\n      console.log(file);\r\n      this.avatar = file.content;\r\n    },\r\n    onSexConfirm(value, index) {\r\n      this.showSex = false;\r\n    },\r\n    getUserInfo() {\r\n      authInfo().then(res => {\r\n        this.avatar = res.data.data.avatar;\r\n        this.nickName = res.data.data.nickName;\r\n        this.gender = res.data.data.gender;\r\n        this.mobile = res.data.data.mobile;\r\n      })\r\n    },\r\n    loginOut() {\r\n      authLogout().then(res => {\r\n        removeLocalStorage('Authorization')\r\n        removeLocalStorage('avatar')\r\n        removeLocalStorage('nickName')\r\n        this.$router.push({ name: 'home' });\r\n      });\r\n\r\n    }\r\n  },\r\n\r\n  components: {\r\n    [Button.name]: Button,\r\n    [Uploader.name]: Uploader,\r\n    [Picker.name]: Picker,\r\n    [Popup.name]: Popup\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.user_information {\r\n  .user_avatar_upload {\r\n    position: relative;\r\n    width: 50px;\r\n    height: 50px;\r\n    border: 1px solid $border-color;\r\n    img {\r\n      max-width: 100%;\r\n      max-height: 100%;\r\n    }\r\n    i {\r\n      position: absolute;\r\n      top: 50%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      font-size: 20px;\r\n      color: $border-color;\r\n    }\r\n  }\r\n  .user_quit {\r\n    margin-top: 20px;\r\n  }\r\n}\r\n</style>\r\n"]}]}