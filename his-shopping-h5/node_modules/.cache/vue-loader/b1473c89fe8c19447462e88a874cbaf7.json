{"remainingRequest":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\XM\\his-shopping-h5\\src\\views\\order\\order-detail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\XM\\his-shopping-h5\\src\\views\\order\\order-detail\\index.vue","mtime":1606186248940},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { Card, Field, SubmitBar, Button, Cell, CellGroup, Dialog } from 'vant';\r\nimport _ from 'lodash';\r\nimport {\r\n  orderDetail,\r\n  orderDelete,\r\n  orderConfirm,\r\n  orderCancel,\r\n  orderRefund\r\n} from '@/api/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isSubmit: false,\r\n      isDisabled: false,\r\n      orderInfo: {},\r\n      orderGoods: [],\r\n      handleOption: {},\r\n      expressInfo: {}\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    showExp() {\r\n      return _.has(this.orderInfo, 'expNo');\r\n    },\r\n    deleteOrder(id) {\r\n      let that = this;\r\n      this.$dialog\r\n        .confirm({ message: '确定要删除该订单吗?' })\r\n        .then(() => {\r\n          orderDelete({ orderId: id }).then(() => {\r\n            this.$toast('已删除订单');\r\n            this.$router.go(-1);\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    cancelOrder(id) {\r\n      this.$dialog\r\n        .confirm({ message: '确定要取消该订单吗?' })\r\n        .then(() => {\r\n          orderDelete({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已取消该订单');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    confirmOrder(id) {\r\n      this.$dialog\r\n        .confirm({\r\n          message: '请确认收到货物, 确认收货后无法撤销!'\r\n        })\r\n        .then(() => {\r\n          orderConfirm({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已确认收货');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    refundOrder(id) {\r\n      this.$dialog\r\n        .confirm({ message: '确定要申请退款吗?' })\r\n        .then(() => {\r\n          orderRefund({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已申请订单退款');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    commentOrder(id) {},\r\n    toPay(id) {\r\n      this.$router.push({ name: 'payment', params: { orderId: id } });\r\n    },\r\n    init() {\r\n      let orderId = this.$route.query.orderId;\r\n      orderDetail({ orderId: orderId }).then(res => {\r\n        var data = res.data.data;\r\n        this.orderInfo = data.orderInfo;\r\n        this.orderGoods = data.orderGoods;\r\n        this.handleOption = data.orderInfo.handleOption;\r\n        this.expressInfo = data.expressInfo;\r\n      });\r\n    }\r\n  },\r\n\r\n  components: {\r\n    [Dialog.name]: Dialog,\r\n    [CellGroup.name]: CellGroup,\r\n    [Cell.name]: Cell,\r\n    [Button.name]: Button,\r\n    [SubmitBar.name]: SubmitBar,\r\n    [Card.name]: Card,\r\n    [Field.name]: Field\r\n  }\r\n};\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/order/order-detail","sourcesContent":["<template>\r\n  <div class=\"order_detail\">\r\n    <div class=\"order-goods\">\r\n      <van-card v-for=\"item in orderGoods\"\r\n                :key=\"item.id\"\r\n                :title=\"item.goodsName\"\r\n                desc=\"暂无描述\"\r\n                :num=\"item.number\"\r\n                :price=\"item.price +'.00'\"\r\n                :thumb=\"item.picUrl\"></van-card>\r\n\r\n      <van-cell-group>\r\n        <van-cell title=\"商品金额\">\r\n          <span class=\"red\">{{orderInfo.goodsPrice * 100 | yuan}}</span>\r\n        </van-cell>\r\n        <van-cell title=\"快递费用\">\r\n          <span class=\"red\">{{orderInfo.freightPrice * 100 | yuan}}</span>\r\n        </van-cell>\r\n      </van-cell-group>\r\n    </div>\r\n\r\n    <van-cell-group style=\"margin-top: 20px;\">\r\n      <van-cell icon=\"dingwei\"\r\n                :title=\"`${orderInfo.consignee}  ${orderInfo.mobile}`\"\r\n                :label=\"orderInfo.address\" />\r\n    </van-cell-group>\r\n\r\n    <van-cell-group style=\"margin-top: 20px;\">\r\n      <van-cell title=\"下单时间\">\r\n        <span>{{orderInfo.addTime }}</span>\r\n      </van-cell>\r\n      <van-cell title=\"订单编号\">\r\n        <span>{{orderInfo.orderSn }}</span>\r\n      </van-cell>\r\n      <van-cell title=\"订单备注\">\r\n        <span>{{orderInfo.remark }}</span>\r\n      </van-cell>\r\n\r\n      <van-cell title=\"实付款：\">\r\n        <span class=\"red\">{{orderInfo.actualPrice * 100 | yuan}}</span>\r\n      </van-cell>\r\n      <!-- 订单动作 -->\r\n      <van-cell>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.cancel\"\r\n                    @click=\"cancelOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    round\r\n                    type=\"danger\">取消订单</van-button>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.pay\"\r\n                    @click=\"payOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    round\r\n                    type=\"danger\">去支付</van-button>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.delete\"\r\n                    @click=\"deleteOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    type=\"danger\">删除订单</van-button>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.confirm\"\r\n                    @click=\"confirmOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    type=\"danger\">确认收货</van-button>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.refund\"\r\n                    @click=\"refundOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    type=\"danger\">退款</van-button>\r\n      </van-cell>\r\n    </van-cell-group>\r\n\r\n    <van-cell-group v-if=\"showExp()\"\r\n                    style=\"margin-top: 20px;\">\r\n      <van-cell title=\"快递公司\">\r\n        <span>{{orderInfo.expCode }}</span>\r\n      </van-cell>\r\n      <van-cell title=\"快递编号\">\r\n        <span>{{orderInfo.expNo }}</span>\r\n      </van-cell>\r\n    </van-cell-group>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Card, Field, SubmitBar, Button, Cell, CellGroup, Dialog } from 'vant';\r\nimport _ from 'lodash';\r\nimport {\r\n  orderDetail,\r\n  orderDelete,\r\n  orderConfirm,\r\n  orderCancel,\r\n  orderRefund\r\n} from '@/api/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isSubmit: false,\r\n      isDisabled: false,\r\n      orderInfo: {},\r\n      orderGoods: [],\r\n      handleOption: {},\r\n      expressInfo: {}\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    showExp() {\r\n      return _.has(this.orderInfo, 'expNo');\r\n    },\r\n    deleteOrder(id) {\r\n      let that = this;\r\n      this.$dialog\r\n        .confirm({ message: '确定要删除该订单吗?' })\r\n        .then(() => {\r\n          orderDelete({ orderId: id }).then(() => {\r\n            this.$toast('已删除订单');\r\n            this.$router.go(-1);\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    cancelOrder(id) {\r\n      this.$dialog\r\n        .confirm({ message: '确定要取消该订单吗?' })\r\n        .then(() => {\r\n          orderDelete({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已取消该订单');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    confirmOrder(id) {\r\n      this.$dialog\r\n        .confirm({\r\n          message: '请确认收到货物, 确认收货后无法撤销!'\r\n        })\r\n        .then(() => {\r\n          orderConfirm({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已确认收货');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    refundOrder(id) {\r\n      this.$dialog\r\n        .confirm({ message: '确定要申请退款吗?' })\r\n        .then(() => {\r\n          orderRefund({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已申请订单退款');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    commentOrder(id) {},\r\n    toPay(id) {\r\n      this.$router.push({ name: 'payment', params: { orderId: id } });\r\n    },\r\n    init() {\r\n      let orderId = this.$route.query.orderId;\r\n      orderDetail({ orderId: orderId }).then(res => {\r\n        var data = res.data.data;\r\n        this.orderInfo = data.orderInfo;\r\n        this.orderGoods = data.orderGoods;\r\n        this.handleOption = data.orderInfo.handleOption;\r\n        this.expressInfo = data.expressInfo;\r\n      });\r\n    }\r\n  },\r\n\r\n  components: {\r\n    [Dialog.name]: Dialog,\r\n    [CellGroup.name]: CellGroup,\r\n    [Cell.name]: Cell,\r\n    [Button.name]: Button,\r\n    [SubmitBar.name]: SubmitBar,\r\n    [Card.name]: Card,\r\n    [Field.name]: Field\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.order_detail {\r\n  padding-bottom: 70px;\r\n}\r\n</style>\r\n"]}]}