{"remainingRequest":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\XM\\his-shopping-h5\\src\\views\\login\\login.vue?vue&type=style&index=0&id=a49090ce&lang=scss&scoped=true&","dependencies":[{"path":"E:\\XM\\his-shopping-h5\\src\\views\\login\\login.vue","mtime":1606186248937},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n@import '../../assets/scss/mixin';\r\n.login {\r\n  position: relative;\r\n  background-color: #fff;\r\n}\r\n.store_header {\r\n  text-align: center;\r\n  padding: 30px 0;\r\n  .store_avatar img {\r\n    border-radius: 50%;\r\n  }\r\n  .store_name {\r\n    padding-top: 5px;\r\n    font-size: 16px;\r\n  }\r\n}\r\n.register {\r\n  padding-top: 40px;\r\n  color: $font-color-gray;\r\n  a {\r\n    color: $font-color-gray;\r\n  }\r\n  > div {\r\n    width: 50%;\r\n    box-sizing: border-box;\r\n    padding: 0 20px;\r\n  }\r\n  .connect {\r\n    @include one-border(right);\r\n    text-align: right;\r\n  }\r\n}\r\n.bottom_positon {\r\n  position: absolute;\r\n  bottom: 30px;\r\n  width: 100%;\r\n}\r\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views/login","sourcesContent":["<template>\r\n\t<div class=\"login\">\r\n    \t<div class=\"store_header\">\r\n\t\t<div class=\"store_avatar\">\r\n\t\t\t<img src=\"../../assets/images/avatar_default.png\" alt=\"头像\" width=\"55\" height=\"55\">\r\n\t\t</div>\r\n\t\t<div class=\"store_name\">litemall-vue</div>\r\n\t</div>\r\n\r\n    <md-field-group>\r\n      <md-field\r\n        v-model=\"account\"\r\n        icon=\"username\"\r\n        placeholder=\"请输入测试账号 user123\"\r\n        right-icon=\"clear-full\"\r\n        name=\"user\"\r\n        data-vv-as=\"帐号\"\r\n        @right-click=\"clearText\"\r\n      />\r\n\r\n      <md-field\r\n        v-model=\"password\"\r\n        icon=\"lock\"\r\n        placeholder=\"请输入测试密码 user123\"\r\n        :type=\"visiblePass ? 'text' : 'password'\"\r\n        :right-icon=\"visiblePass ? 'eye-open' : 'eye-close'\"\r\n        data-vv-as=\"密码\"\r\n        name=\"password\"\r\n        @right-click=\"visiblePass = !visiblePass\"\r\n      />\r\n\r\n      <div class=\"clearfix\">\r\n        <div class=\"float-l\">\r\n          <router-link to=\"/login/registerGetCode\">免费注册</router-link>\r\n        </div>\r\n        <div class=\"float-r\">\r\n          <router-link to=\"/login/forget\">忘记密码</router-link>\r\n        </div>\r\n      </div>\r\n\r\n      <van-button size=\"large\" type=\"danger\" :loading=\"isLogining\" @click=\"loginSubmit\">登录</van-button>\r\n    </md-field-group>\r\n\r\n\r\n      <div class=\"text-desc text-center bottom_positon\">技术支持: litemall</div>\r\n\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport field from '@/components/field/';\r\nimport fieldGroup from '@/components/field-group/';\r\n\r\nimport { authLoginByAccount } from '@/api/api';\r\nimport { setLocalStorage } from '@/utils/local-storage';\r\nimport { emailReg, mobileReg } from '@/utils/validate';\r\n\r\nimport { Toast } from 'vant';\r\n\r\n\r\nexport default {\r\n  name: 'login-request',\r\n  components: {\r\n    [field.name]: field,\r\n    [fieldGroup.name]: fieldGroup,\r\n    Toast\r\n  },\r\n  data() {\r\n    return {\r\n      account: '',\r\n      password: '',\r\n      visiblePass: false,\r\n      isLogining: false,\r\n      userInfo: {}\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    clearText() {\r\n      this.account = '';\r\n    },\r\n\r\n    validate() {\r\n\r\n    },\r\n\r\n    login() {\r\n      let loginData = this.getLoginData();\r\n      authLoginByAccount(loginData).then(res => {\r\n        this.userInfo = res.data.data.userInfo;\r\n        setLocalStorage({\r\n          Authorization: res.data.data.token,\r\n          avatar: this.userInfo.avatarUrl,\r\n          nickName: this.userInfo.nickName\r\n        });\r\n\r\n        this.routerRedirect();\r\n      }).catch(error => {\r\n        Toast.fail(error.data.errmsg);\r\n      });\r\n    },\r\n\r\n    loginSubmit() {\r\n      this.isLogining = true;\r\n      try {\r\n        this.validate();\r\n        this.login();\r\n        this.isLogining = false;\r\n      } catch (err) {\r\n        console.log(err.message);\r\n        this.isLogining = false;\r\n      }\r\n    },\r\n\r\n    routerRedirect() {\r\n      // const { query } = this.$route;\r\n      // this.$router.replace({\r\n      //   name: query.redirect || 'home',\r\n      //   query: query\r\n      // });\r\n      window.location = '#/user/';\r\n    },\r\n\r\n    getLoginData() {\r\n      const password = this.password;\r\n      const account = this.getUserType(this.account);\r\n      return {\r\n        [account]: this.account,\r\n        password: password\r\n      };\r\n    },\r\n\r\n    getUserType(account) {\r\n      const accountType = mobileReg.test(account)\r\n        ? 'mobile'\r\n        : emailReg.test(account)\r\n        ? 'email'\r\n        : 'username';\r\n      return accountType;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../assets/scss/mixin';\r\n.login {\r\n  position: relative;\r\n  background-color: #fff;\r\n}\r\n.store_header {\r\n  text-align: center;\r\n  padding: 30px 0;\r\n  .store_avatar img {\r\n    border-radius: 50%;\r\n  }\r\n  .store_name {\r\n    padding-top: 5px;\r\n    font-size: 16px;\r\n  }\r\n}\r\n.register {\r\n  padding-top: 40px;\r\n  color: $font-color-gray;\r\n  a {\r\n    color: $font-color-gray;\r\n  }\r\n  > div {\r\n    width: 50%;\r\n    box-sizing: border-box;\r\n    padding: 0 20px;\r\n  }\r\n  .connect {\r\n    @include one-border(right);\r\n    text-align: right;\r\n  }\r\n}\r\n.bottom_positon {\r\n  position: absolute;\r\n  bottom: 30px;\r\n  width: 100%;\r\n}\r\n</style>\r\n"]}]}