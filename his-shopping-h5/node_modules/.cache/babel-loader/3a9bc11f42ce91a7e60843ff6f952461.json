{"remainingRequest":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js!E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\XM\\his-shopping-h5\\src\\views\\items\\category\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\XM\\his-shopping-h5\\src\\views\\items\\category\\index.vue","mtime":1606186248929},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:/XM/his-shopping-h5/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"E:/XM/his-shopping-h5/node_modules/@babel/runtime/helpers/defineProperty\"));\n\nrequire(\"vant/es/tabs/style\");\n\nvar _tabs = _interopRequireDefault(require(\"vant/es/tabs\"));\n\nrequire(\"vant/es/tab/style\");\n\nvar _tab = _interopRequireDefault(require(\"vant/es/tab\"));\n\nrequire(\"vant/es/card/style\");\n\nvar _card = _interopRequireDefault(require(\"vant/es/card\"));\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"vant/es/list/style\");\n\nvar _list = _interopRequireDefault(require(\"vant/es/list\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"E:/XM/his-shopping-h5/node_modules/@babel/runtime/helpers/toConsumableArray\"));\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _api = require(\"@/api/api\");\n\nvar _components;\n\nvar _default = {\n  name: 'Item-list',\n  props: {\n    itemClass: {\n      type: [String, Number],\n      default: ''\n    }\n  },\n  data: function data() {\n    return {\n      categoryId: this.itemClass,\n      goodsList: [],\n      page: 0,\n      limit: 10,\n      currentCategory: {},\n      navList: [],\n      navActive: 0,\n      loading: false,\n      finished: false\n    };\n  },\n  created: function created() {\n    this.init();\n  },\n  methods: {\n    handleTabClick: function handleTabClick(index) {\n      this.categoryId = this.navList[index].id;\n      this.$router.replace({\n        name: 'category',\n        query: {\n          itemClass: this.categoryId\n        }\n      });\n      this.init();\n    },\n    init: function init() {\n      var _this = this;\n\n      (0, _api.goodsCategory)({\n        id: this.categoryId\n      }).then(function (res) {\n        _this.navList = res.data.data.brotherCategory;\n        _this.currentCategory = res.data.data.currentCategory; // 当id是L1分类id时，这里需要重新设置成L1分类的一个子分类的id\n\n        if (res.data.data.parentCategory.id == _this.categoryId) {\n          _this.categoryId = res.data.data.currentCategory.id;\n        }\n\n        for (var i = 0; i < _this.navList.length; i++) {\n          if (_this.navList[i].id == _this.categoryId) {\n            _this.navActive = i;\n            break;\n          }\n        }\n\n        _this.page = 0;\n        _this.goodsList = [];\n\n        _this.getGoodsList();\n      });\n    },\n    getGoodsList: function getGoodsList() {\n      var _this2 = this;\n\n      this.page++;\n      (0, _api.goodsList)({\n        categoryId: this.categoryId,\n        page: this.page,\n        limit: this.limit\n      }).then(function (res) {\n        var _this2$goodsList;\n\n        (_this2$goodsList = _this2.goodsList).push.apply(_this2$goodsList, (0, _toConsumableArray2.default)(res.data.data.list));\n\n        _this2.loading = false;\n        _this2.finished = res.data.data.page >= res.data.data.pages;\n      });\n    },\n    itemClick: function itemClick(id) {\n      this.$router.push(\"/items/detail/\".concat(id));\n    }\n  },\n  components: (_components = {}, (0, _defineProperty2.default)(_components, _list.default.name, _list.default), (0, _defineProperty2.default)(_components, _card.default.name, _card.default), (0, _defineProperty2.default)(_components, _tab.default.name, _tab.default), (0, _defineProperty2.default)(_components, _tabs.default.name, _tabs.default), _components)\n};\nexports.default = _default;",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"item_list\">\r\n    <van-tabs v-model=\"navActive\"\r\n              @click=\"handleTabClick\">\r\n      <van-tab v-for=\"(nav, index) in navList\"\r\n               :title=\"nav.name\"\r\n               :key=\"index\">\r\n        <van-list v-model=\"loading\"\r\n                  :finished=\"finished\"\r\n                  :immediate-check=\"false\"\r\n                  finished-text=\"没有更多了\"\r\n                  @load=\"getGoodsList\">\r\n          <div class=\"h\">\r\n            <div class=\"name\">{{currentCategory.name}}</div>\r\n            <div class=\"desc\">{{currentCategory.desc}}</div>\r\n          </div>\r\n          <van-card v-for=\"(item, i) in goodsList\"\r\n                    :key=\"i\"\r\n                    :desc=\"item.brief\"\r\n                    :title=\"item.name\"\r\n                    :thumb=\"item.picUrl\"\r\n                    :price=\"item.retailPrice\"\r\n                    :origin-price=\"item.counterPrice\"\r\n                    @click=\"itemClick(item.id)\" />\r\n        </van-list>\r\n\r\n      </van-tab>\r\n    </van-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { goodsCategory, goodsList } from '@/api/api';\r\nimport { Card, List, Tab, Tabs } from 'vant';\r\n\r\nexport default {\r\n  name: 'Item-list',\r\n  props: {\r\n    itemClass: {\r\n      type: [String, Number],\r\n      default: ''\r\n    }\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      categoryId: this.itemClass,\r\n      goodsList: [],\r\n      page: 0,\r\n      limit: 10,\r\n      currentCategory: {},\r\n      navList: [],\r\n      navActive: 0,\r\n      loading: false,\r\n      finished: false\r\n    };\r\n  },\r\n\r\n  created() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    handleTabClick(index) {\r\n      this.categoryId = this.navList[index].id;\r\n      this.$router.replace({\r\n        name: 'category',\r\n        query: { itemClass: this.categoryId }\r\n      });\r\n      this.init();\r\n    },\r\n    init() {\r\n      goodsCategory({ id: this.categoryId }).then(res => {\r\n        this.navList = res.data.data.brotherCategory;\r\n        this.currentCategory = res.data.data.currentCategory;\r\n\r\n        // 当id是L1分类id时，这里需要重新设置成L1分类的一个子分类的id\r\n        if (res.data.data.parentCategory.id == this.categoryId) {\r\n          this.categoryId = res.data.data.currentCategory.id;\r\n        }\r\n\r\n        for (let i = 0; i < this.navList.length; i++) {\r\n          if (this.navList[i].id == this.categoryId) {\r\n            this.navActive = i;\r\n            break;\r\n          }\r\n        }\r\n        this.page = 0;\r\n        this.goodsList = [];\r\n        this.getGoodsList();\r\n      });\r\n    },\r\n    getGoodsList() {\r\n      this.page++;\r\n      goodsList({\r\n        categoryId: this.categoryId,\r\n        page: this.page,\r\n        limit: this.limit\r\n      }).then(res => {\r\n        this.goodsList.push(...res.data.data.list);\r\n        this.loading = false;\r\n        this.finished = res.data.data.page >= res.data.data.pages;\r\n      });\r\n    },\r\n    itemClick(id) {\r\n      this.$router.push(`/items/detail/${id}`);\r\n    }\r\n  },\r\n\r\n  components: {\r\n    [List.name]: List,\r\n    [Card.name]: Card,\r\n    [Tab.name]: Tab,\r\n    [Tabs.name]: Tabs\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.item_list {\r\n  background-color: #fff;\r\n}\r\n\r\n.h {\r\n  height: 100px;\r\n  width: 100%;\r\n  margin-top: 10px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n}\r\n\r\n.h .name {\r\n  display: block;\r\n  height: 30px;\r\n  margin-bottom: 10px;\r\n  font-size: 20px;\r\n  color: #333;\r\n}\r\n\r\n.h .desc {\r\n  display: block;\r\n  height: 24px;\r\n  font-size: 16px;\r\n  color: #999;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/items/category"}]}