{"remainingRequest":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js!E:\\XM\\his-shopping-h5\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\XM\\his-shopping-h5\\src\\utils\\request.js","dependencies":[{"path":"E:\\XM\\his-shopping-h5\\src\\utils\\request.js","mtime":1606186248926},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:/XM/his-shopping-h5/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"vant/es/dialog/style\");\n\nvar _dialog = _interopRequireDefault(require(\"vant/es/dialog\"));\n\nrequire(\"vant/es/toast/style\");\n\nvar _toast = _interopRequireDefault(require(\"vant/es/toast\"));\n\nvar _axios = _interopRequireDefault(require(\"axios\"));\n\n// create an axios instance\nvar service = _axios.default.create({\n  baseURL: process.env.VUE_APP_BASE_API,\n  // api 的 base_url\n  timeout: 5000 // request timeout\n\n}); // request interceptor\n\n\nservice.interceptors.request.use(function (config) {\n  if (!config.headers['X-Litemall-Token']) {\n    config.headers['X-Litemall-Token'] = \"\".concat(window.localStorage.getItem('Authorization') || '');\n  }\n\n  return config;\n}, function (err) {\n  return Promise.reject(err);\n}); // response interceptor\n\nservice.interceptors.response.use(function (response) {\n  var res = response.data;\n\n  if (res.errno === 501) {\n    _toast.default.fail('请登录');\n\n    setTimeout(function () {\n      window.location = '#/login/';\n    }, 1500);\n    return Promise.reject('error');\n  } else if (res.errno === 502) {\n    _toast.default.fail('网站内部错误，请联系网站维护人员');\n\n    return Promise.reject('error');\n  }\n\n  if (res.errno === 401) {\n    _toast.default.fail('参数不对');\n\n    return Promise.reject('error');\n  }\n\n  if (res.errno === 402) {\n    _toast.default.fail('参数值不对');\n\n    return Promise.reject('error');\n  } else if (res.errno !== 0) {\n    // 非5xx的错误属于业务错误，留给具体页面处理\n    return Promise.reject(response);\n  } else {\n    return response;\n  }\n}, function (error) {\n  console.log('err' + error); // for debug\n\n  _dialog.default.alert({\n    title: '警告',\n    message: '登录连接超时'\n  });\n\n  return Promise.reject(error);\n});\nvar _default = service;\nexports.default = _default;",{"version":3,"sources":["E:/XM/his-shopping-h5/src/utils/request.js"],"names":["service","axios","create","baseURL","process","env","VUE_APP_BASE_API","timeout","interceptors","request","use","config","headers","window","localStorage","getItem","err","Promise","reject","response","res","data","errno","fail","setTimeout","location","error","console","log","alert","title","message"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AAGA;AACA,IAAMA,OAAO,GAAGC,eAAMC,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,gBADM;AACY;AACvCC,EAAAA,OAAO,EAAE,IAFkB,CAEb;;AAFa,CAAb,CAAhB,C,CAKA;;;AACAP,OAAO,CAACQ,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACI,UAAAC,MAAM,EAAI;AACV,MAAI,CAACA,MAAM,CAACC,OAAP,CAAe,kBAAf,CAAL,EAAyC;AACvCD,IAAAA,MAAM,CAACC,OAAP,CAAe,kBAAf,cAAwCC,MAAM,CAACC,YAAP,CAAoBC,OAApB,CACtC,eADsC,KAEnC,EAFL;AAGD;;AACD,SAAOJ,MAAP;AACD,CARH,EASE,UAAAK,GAAG;AAAA,SAAIC,OAAO,CAACC,MAAR,CAAeF,GAAf,CAAJ;AAAA,CATL,E,CAYA;;AACAhB,OAAO,CAACQ,YAAR,CAAqBW,QAArB,CAA8BT,GAA9B,CACE,UAAAS,QAAQ,EAAI;AACV,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;;AAEA,MAAID,GAAG,CAACE,KAAJ,KAAc,GAAlB,EAAuB;AACnB,mBAAMC,IAAN,CAAW,KAAX;;AACAC,IAAAA,UAAU,CAAC,YAAM;AACfX,MAAAA,MAAM,CAACY,QAAP,GAAkB,UAAlB;AACD,KAFS,EAEP,IAFO,CAAV;AAGF,WAAOR,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD,GAND,MAMO,IAAIE,GAAG,CAACE,KAAJ,KAAc,GAAlB,EAAuB;AAC1B,mBAAMC,IAAN,CAAW,kBAAX;;AACF,WAAON,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD;;AAAC,MAAIE,GAAG,CAACE,KAAJ,KAAc,GAAlB,EAAuB;AACvB,mBAAMC,IAAN,CAAW,MAAX;;AACA,WAAON,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD;;AAAC,MAAIE,GAAG,CAACE,KAAJ,KAAc,GAAlB,EAAuB;AACvB,mBAAMC,IAAN,CAAW,OAAX;;AACA,WAAON,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACD,GAHC,MAGK,IAAIE,GAAG,CAACE,KAAJ,KAAc,CAAlB,EAAqB;AAC1B;AACA,WAAOL,OAAO,CAACC,MAAR,CAAeC,QAAf,CAAP;AACD,GAHM,MAGA;AACL,WAAOA,QAAP;AACD;AACF,CAzBH,EAyBK,UAAAO,KAAK,EAAI;AACVC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQF,KAApB,EADU,CACgB;;AAC1B,kBAAOG,KAAP,CAAa;AACTC,IAAAA,KAAK,EAAE,IADE;AAETC,IAAAA,OAAO,EAAE;AAFA,GAAb;;AAIA,SAAOd,OAAO,CAACC,MAAR,CAAeQ,KAAf,CAAP;AACD,CAhCH;eAkCe1B,O","sourcesContent":["import axios from 'axios'\r\nimport { Dialog, Toast } from 'vant';\r\n\r\n// create an axios instance\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_BASE_API, // api 的 base_url\r\n  timeout: 5000 // request timeout\r\n})\r\n\r\n// request interceptor\r\nservice.interceptors.request.use(\r\n    config => {\r\n    if (!config.headers['X-Litemall-Token']) {\r\n      config.headers['X-Litemall-Token'] = `${window.localStorage.getItem(\r\n        'Authorization'\r\n      ) || ''}`;\r\n    }\r\n    return config;\r\n  },\r\n  err => Promise.reject(err)\r\n)\r\n\r\n// response interceptor\r\nservice.interceptors.response.use(\r\n  response => {\r\n    const res = response.data\r\n\r\n    if (res.errno === 501) {\r\n        Toast.fail('请登录');\r\n        setTimeout(() => {\r\n          window.location = '#/login/'\r\n        }, 1500)\r\n      return Promise.reject('error')\r\n    } else if (res.errno === 502) {\r\n        Toast.fail('网站内部错误，请联系网站维护人员')\r\n      return Promise.reject('error')\r\n    } if (res.errno === 401) {\r\n      Toast.fail('参数不对');\r\n      return Promise.reject('error')\r\n    } if (res.errno === 402) {\r\n      Toast.fail('参数值不对');\r\n      return Promise.reject('error')\r\n    } else if (res.errno !== 0) {\r\n      // 非5xx的错误属于业务错误，留给具体页面处理\r\n      return Promise.reject(response)\r\n    } else {\r\n      return response\r\n    }\r\n  }, error => {\r\n    console.log('err' + error)// for debug\r\n    Dialog.alert({\r\n        title: '警告',\r\n        message: '登录连接超时'\r\n      });\r\n    return Promise.reject(error)\r\n  })\r\n\r\nexport default service\r\n"]}]}