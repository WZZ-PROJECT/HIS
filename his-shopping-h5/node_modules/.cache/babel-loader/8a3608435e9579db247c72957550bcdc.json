{"remainingRequest":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js!E:\\XM\\his-shopping-h5\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\XM\\his-shopping-h5\\src\\router\\index.js","dependencies":[{"path":"E:\\XM\\his-shopping-h5\\src\\router\\index.js","mtime":1606186248921},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:/XM/his-shopping-h5/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"E:/XM/his-shopping-h5/node_modules/@babel/runtime/helpers/toConsumableArray\"));\n\nvar _vue = _interopRequireDefault(require(\"vue\"));\n\nvar _vueRouter = _interopRequireDefault(require(\"vue-router\"));\n\nvar _localStorage = require(\"@/utils/local-storage\");\n\nvar _home = _interopRequireDefault(require(\"./home\"));\n\nvar _items = _interopRequireDefault(require(\"./items\"));\n\nvar _user = _interopRequireDefault(require(\"./user\"));\n\nvar _order = _interopRequireDefault(require(\"./order\"));\n\nvar _login = _interopRequireDefault(require(\"./login\"));\n\nvar _index = _interopRequireDefault(require(\"../store/index\"));\n\nvar originalPush = _vueRouter.default.prototype.push;\n\n_vueRouter.default.prototype.push = function push(location, onResolve, onReject) {\n  if (onResolve || onReject) return originalPush.call(this, location, onResolve, onReject);\n  return originalPush.call(this, location).catch(function (err) {\n    return err;\n  });\n};\n\n_vue.default.use(_vueRouter.default);\n\nvar RouterModel = new _vueRouter.default({\n  routes: [].concat((0, _toConsumableArray2.default)(_home.default), (0, _toConsumableArray2.default)(_items.default), (0, _toConsumableArray2.default)(_user.default), (0, _toConsumableArray2.default)(_order.default), (0, _toConsumableArray2.default)(_login.default))\n});\nRouterModel.beforeEach(function (to, from, next) {\n  var _getLocalStorage = (0, _localStorage.getLocalStorage)('Authorization'),\n      Authorization = _getLocalStorage.Authorization;\n\n  if (!Authorization) {\n    if (to.meta.login) {\n      console.log(\"login\");\n      next({\n        name: 'login',\n        query: {\n          redirect: to.name\n        }\n      });\n      return;\n    }\n  } // console.log(to.meta,\"meta\");\n  //页面顶部菜单拦截\n\n\n  var emptyObj = JSON.stringify(to.meta) == \"{}\";\n  var undefinedObj = typeof to.meta.showHeader == \"undefined\";\n\n  if (!emptyObj && !undefinedObj) {\n    _index.default.commit(\"CHANGE_HEADER\", to.meta);\n  } else {\n    _index.default.commit(\"CHANGE_HEADER\", {\n      showHeader: true,\n      title: \"\"\n    });\n  }\n\n  next();\n});\nvar _default = RouterModel;\nexports.default = _default;",{"version":3,"sources":["E:/XM/his-shopping-h5/src/router/index.js"],"names":["originalPush","Router","prototype","push","location","onResolve","onReject","call","catch","err","Vue","use","RouterModel","routes","home","items","user","order","login","beforeEach","to","from","next","Authorization","meta","console","log","name","query","redirect","emptyObj","JSON","stringify","undefinedObj","showHeader","store","commit","title"],"mappings":";;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,YAAY,GAAGC,mBAAOC,SAAP,CAAiBC,IAAtC;;AACAF,mBAAOC,SAAP,CAAiBC,IAAjB,GAAwB,SAASA,IAAT,CAAcC,QAAd,EAAwBC,SAAxB,EAAmCC,QAAnC,EAA6C;AACnE,MAAID,SAAS,IAAIC,QAAjB,EAA2B,OAAON,YAAY,CAACO,IAAb,CAAkB,IAAlB,EAAwBH,QAAxB,EAAkCC,SAAlC,EAA6CC,QAA7C,CAAP;AAC3B,SAAON,YAAY,CAACO,IAAb,CAAkB,IAAlB,EAAwBH,QAAxB,EAAkCI,KAAlC,CAAwC,UAAAC,GAAG;AAAA,WAAIA,GAAJ;AAAA,GAA3C,CAAP;AACD,CAHD;;AAKAC,aAAIC,GAAJ,CAAQV,kBAAR;;AAEA,IAAMW,WAAW,GAAG,IAAIX,kBAAJ,CAAW;AAC7BY,EAAAA,MAAM,6CAAMC,aAAN,oCAAeC,cAAf,oCAAyBC,aAAzB,oCAAkCC,cAAlC,oCAA4CC,cAA5C;AADuB,CAAX,CAApB;AAIAN,WAAW,CAACO,UAAZ,CAAuB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AAAA,yBACf,mCACxB,eADwB,CADe;AAAA,MACjCC,aADiC,oBACjCA,aADiC;;AAIzC,MAAI,CAACA,aAAL,EAAoB;AAClB,QAAIH,EAAE,CAACI,IAAH,CAAQN,KAAZ,EAAmB;AACjBO,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ;AACAJ,MAAAA,IAAI,CAAC;AAAEK,QAAAA,IAAI,EAAE,OAAR;AAAiBC,QAAAA,KAAK,EAAE;AAAEC,UAAAA,QAAQ,EAAET,EAAE,CAACO;AAAf;AAAxB,OAAD,CAAJ;AACA;AACD;AACF,GAVwC,CAWzC;AACA;;;AACA,MAAIG,QAAQ,GAACC,IAAI,CAACC,SAAL,CAAeZ,EAAE,CAACI,IAAlB,KAA2B,IAAxC;AACA,MAAIS,YAAY,GAAC,OAAOb,EAAE,CAACI,IAAH,CAAQU,UAAf,IAA4B,WAA7C;;AACA,MAAG,CAACJ,QAAD,IAAW,CAACG,YAAf,EAA4B;AAC1BE,mBAAMC,MAAN,CAAa,eAAb,EAA6BhB,EAAE,CAACI,IAAhC;AACD,GAFD,MAEK;AACHW,mBAAMC,MAAN,CAAa,eAAb,EAA6B;AAACF,MAAAA,UAAU,EAAC,IAAZ;AAAiBG,MAAAA,KAAK,EAAC;AAAvB,KAA7B;AACD;;AACDf,EAAAA,IAAI;AACL,CArBD;eAuBeV,W","sourcesContent":["import Vue from 'vue';\r\nimport Router from 'vue-router';\r\nimport { getLocalStorage } from '@/utils/local-storage';\r\n\r\nimport home from './home';\r\nimport items from './items';\r\nimport user from './user';\r\nimport order from './order';\r\nimport login from './login';\r\nimport store from '../store/index';\r\n\r\nconst originalPush = Router.prototype.push\r\nRouter.prototype.push = function push(location, onResolve, onReject) {\r\n  if (onResolve || onReject) return originalPush.call(this, location, onResolve, onReject)\r\n  return originalPush.call(this, location).catch(err => err)\r\n}\r\n\r\nVue.use(Router);\r\n\r\nconst RouterModel = new Router({\r\n  routes: [...home, ...items, ...user, ...order, ...login]\r\n});\r\n\r\nRouterModel.beforeEach((to, from, next) => {\r\n  const { Authorization } = getLocalStorage(\r\n    'Authorization'\r\n  );\r\n  if (!Authorization) {\r\n    if (to.meta.login) {\r\n      console.log(\"login\");\r\n      next({ name: 'login', query: { redirect: to.name } });\r\n      return;\r\n    }\r\n  }\r\n  // console.log(to.meta,\"meta\");\r\n  //页面顶部菜单拦截\r\n  let emptyObj=JSON.stringify(to.meta) == \"{}\";\r\n  let undefinedObj=typeof(to.meta.showHeader)==\"undefined\";\r\n  if(!emptyObj&&!undefinedObj){\r\n    store.commit(\"CHANGE_HEADER\",to.meta);\r\n  }else{\r\n    store.commit(\"CHANGE_HEADER\",{showHeader:true,title:\"\"});\r\n  }\r\n  next();\r\n});\r\n\r\nexport default RouterModel;\r\n"]}]}