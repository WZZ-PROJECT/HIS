{"remainingRequest":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js!E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\XM\\his-shopping-h5\\src\\views\\order\\order-detail\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\XM\\his-shopping-h5\\src\\views\\order\\order-detail\\index.vue","mtime":1606186248940},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-h5\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:/XM/his-shopping-h5/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"E:/XM/his-shopping-h5/node_modules/@babel/runtime/helpers/defineProperty\"));\n\nrequire(\"vant/es/field/style\");\n\nvar _field = _interopRequireDefault(require(\"vant/es/field\"));\n\nrequire(\"vant/es/card/style\");\n\nvar _card = _interopRequireDefault(require(\"vant/es/card\"));\n\nrequire(\"vant/es/submit-bar/style\");\n\nvar _submitBar = _interopRequireDefault(require(\"vant/es/submit-bar\"));\n\nrequire(\"vant/es/button/style\");\n\nvar _button = _interopRequireDefault(require(\"vant/es/button\"));\n\nrequire(\"vant/es/cell/style\");\n\nvar _cell = _interopRequireDefault(require(\"vant/es/cell\"));\n\nrequire(\"vant/es/cell-group/style\");\n\nvar _cellGroup = _interopRequireDefault(require(\"vant/es/cell-group\"));\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"vant/es/dialog/style\");\n\nvar _dialog = _interopRequireDefault(require(\"vant/es/dialog\"));\n\nvar _has2 = _interopRequireDefault(require(\"lodash/has\"));\n\nvar _api = require(\"@/api/api\");\n\nvar _components;\n\nvar _default = {\n  data: function data() {\n    return {\n      isSubmit: false,\n      isDisabled: false,\n      orderInfo: {},\n      orderGoods: [],\n      handleOption: {},\n      expressInfo: {}\n    };\n  },\n  created: function created() {\n    this.init();\n  },\n  methods: {\n    showExp: function showExp() {\n      return (0, _has2.default)(this.orderInfo, 'expNo');\n    },\n    deleteOrder: function deleteOrder(id) {\n      var _this = this;\n\n      var that = this;\n      this.$dialog.confirm({\n        message: '确定要删除该订单吗?'\n      }).then(function () {\n        (0, _api.orderDelete)({\n          orderId: id\n        }).then(function () {\n          _this.$toast('已删除订单');\n\n          _this.$router.go(-1);\n        });\n      }).catch(function () {});\n    },\n    cancelOrder: function cancelOrder(id) {\n      var _this2 = this;\n\n      this.$dialog.confirm({\n        message: '确定要取消该订单吗?'\n      }).then(function () {\n        (0, _api.orderDelete)({\n          orderId: id\n        }).then(function () {\n          _this2.init();\n\n          _this2.$toast('已取消该订单');\n        });\n      }).catch(function () {});\n    },\n    confirmOrder: function confirmOrder(id) {\n      var _this3 = this;\n\n      this.$dialog.confirm({\n        message: '请确认收到货物, 确认收货后无法撤销!'\n      }).then(function () {\n        (0, _api.orderConfirm)({\n          orderId: id\n        }).then(function () {\n          _this3.init();\n\n          _this3.$toast('已确认收货');\n        });\n      }).catch(function () {});\n    },\n    refundOrder: function refundOrder(id) {\n      var _this4 = this;\n\n      this.$dialog.confirm({\n        message: '确定要申请退款吗?'\n      }).then(function () {\n        (0, _api.orderRefund)({\n          orderId: id\n        }).then(function () {\n          _this4.init();\n\n          _this4.$toast('已申请订单退款');\n        });\n      }).catch(function () {});\n    },\n    commentOrder: function commentOrder(id) {},\n    toPay: function toPay(id) {\n      this.$router.push({\n        name: 'payment',\n        params: {\n          orderId: id\n        }\n      });\n    },\n    init: function init() {\n      var _this5 = this;\n\n      var orderId = this.$route.query.orderId;\n      (0, _api.orderDetail)({\n        orderId: orderId\n      }).then(function (res) {\n        var data = res.data.data;\n        _this5.orderInfo = data.orderInfo;\n        _this5.orderGoods = data.orderGoods;\n        _this5.handleOption = data.orderInfo.handleOption;\n        _this5.expressInfo = data.expressInfo;\n      });\n    }\n  },\n  components: (_components = {}, (0, _defineProperty2.default)(_components, _dialog.default.name, _dialog.default), (0, _defineProperty2.default)(_components, _cellGroup.default.name, _cellGroup.default), (0, _defineProperty2.default)(_components, _cell.default.name, _cell.default), (0, _defineProperty2.default)(_components, _button.default.name, _button.default), (0, _defineProperty2.default)(_components, _submitBar.default.name, _submitBar.default), (0, _defineProperty2.default)(_components, _card.default.name, _card.default), (0, _defineProperty2.default)(_components, _field.default.name, _field.default), _components)\n};\nexports.default = _default;",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"order_detail\">\r\n    <div class=\"order-goods\">\r\n      <van-card v-for=\"item in orderGoods\"\r\n                :key=\"item.id\"\r\n                :title=\"item.goodsName\"\r\n                desc=\"暂无描述\"\r\n                :num=\"item.number\"\r\n                :price=\"item.price +'.00'\"\r\n                :thumb=\"item.picUrl\"></van-card>\r\n\r\n      <van-cell-group>\r\n        <van-cell title=\"商品金额\">\r\n          <span class=\"red\">{{orderInfo.goodsPrice * 100 | yuan}}</span>\r\n        </van-cell>\r\n        <van-cell title=\"快递费用\">\r\n          <span class=\"red\">{{orderInfo.freightPrice * 100 | yuan}}</span>\r\n        </van-cell>\r\n      </van-cell-group>\r\n    </div>\r\n\r\n    <van-cell-group style=\"margin-top: 20px;\">\r\n      <van-cell icon=\"dingwei\"\r\n                :title=\"`${orderInfo.consignee}  ${orderInfo.mobile}`\"\r\n                :label=\"orderInfo.address\" />\r\n    </van-cell-group>\r\n\r\n    <van-cell-group style=\"margin-top: 20px;\">\r\n      <van-cell title=\"下单时间\">\r\n        <span>{{orderInfo.addTime }}</span>\r\n      </van-cell>\r\n      <van-cell title=\"订单编号\">\r\n        <span>{{orderInfo.orderSn }}</span>\r\n      </van-cell>\r\n      <van-cell title=\"订单备注\">\r\n        <span>{{orderInfo.remark }}</span>\r\n      </van-cell>\r\n\r\n      <van-cell title=\"实付款：\">\r\n        <span class=\"red\">{{orderInfo.actualPrice * 100 | yuan}}</span>\r\n      </van-cell>\r\n      <!-- 订单动作 -->\r\n      <van-cell>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.cancel\"\r\n                    @click=\"cancelOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    round\r\n                    type=\"danger\">取消订单</van-button>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.pay\"\r\n                    @click=\"payOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    round\r\n                    type=\"danger\">去支付</van-button>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.delete\"\r\n                    @click=\"deleteOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    type=\"danger\">删除订单</van-button>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.confirm\"\r\n                    @click=\"confirmOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    type=\"danger\">确认收货</van-button>\r\n        <van-button size=\"small\"\r\n                    v-if=\"handleOption.refund\"\r\n                    @click=\"refundOrder(orderInfo.id)\"\r\n                    style=\" float:right\"\r\n                    type=\"danger\">退款</van-button>\r\n      </van-cell>\r\n    </van-cell-group>\r\n\r\n    <van-cell-group v-if=\"showExp()\"\r\n                    style=\"margin-top: 20px;\">\r\n      <van-cell title=\"快递公司\">\r\n        <span>{{orderInfo.expCode }}</span>\r\n      </van-cell>\r\n      <van-cell title=\"快递编号\">\r\n        <span>{{orderInfo.expNo }}</span>\r\n      </van-cell>\r\n    </van-cell-group>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Card, Field, SubmitBar, Button, Cell, CellGroup, Dialog } from 'vant';\r\nimport _ from 'lodash';\r\nimport {\r\n  orderDetail,\r\n  orderDelete,\r\n  orderConfirm,\r\n  orderCancel,\r\n  orderRefund\r\n} from '@/api/api';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      isSubmit: false,\r\n      isDisabled: false,\r\n      orderInfo: {},\r\n      orderGoods: [],\r\n      handleOption: {},\r\n      expressInfo: {}\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    showExp() {\r\n      return _.has(this.orderInfo, 'expNo');\r\n    },\r\n    deleteOrder(id) {\r\n      let that = this;\r\n      this.$dialog\r\n        .confirm({ message: '确定要删除该订单吗?' })\r\n        .then(() => {\r\n          orderDelete({ orderId: id }).then(() => {\r\n            this.$toast('已删除订单');\r\n            this.$router.go(-1);\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    cancelOrder(id) {\r\n      this.$dialog\r\n        .confirm({ message: '确定要取消该订单吗?' })\r\n        .then(() => {\r\n          orderDelete({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已取消该订单');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    confirmOrder(id) {\r\n      this.$dialog\r\n        .confirm({\r\n          message: '请确认收到货物, 确认收货后无法撤销!'\r\n        })\r\n        .then(() => {\r\n          orderConfirm({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已确认收货');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    refundOrder(id) {\r\n      this.$dialog\r\n        .confirm({ message: '确定要申请退款吗?' })\r\n        .then(() => {\r\n          orderRefund({ orderId: id }).then(() => {\r\n            this.init();\r\n            this.$toast('已申请订单退款');\r\n          });\r\n        })\r\n        .catch(() => {});\r\n    },\r\n    commentOrder(id) {},\r\n    toPay(id) {\r\n      this.$router.push({ name: 'payment', params: { orderId: id } });\r\n    },\r\n    init() {\r\n      let orderId = this.$route.query.orderId;\r\n      orderDetail({ orderId: orderId }).then(res => {\r\n        var data = res.data.data;\r\n        this.orderInfo = data.orderInfo;\r\n        this.orderGoods = data.orderGoods;\r\n        this.handleOption = data.orderInfo.handleOption;\r\n        this.expressInfo = data.expressInfo;\r\n      });\r\n    }\r\n  },\r\n\r\n  components: {\r\n    [Dialog.name]: Dialog,\r\n    [CellGroup.name]: CellGroup,\r\n    [Cell.name]: Cell,\r\n    [Button.name]: Button,\r\n    [SubmitBar.name]: SubmitBar,\r\n    [Card.name]: Card,\r\n    [Field.name]: Field\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" scoped>\r\n.order_detail {\r\n  padding-bottom: 70px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/order/order-detail"}]}