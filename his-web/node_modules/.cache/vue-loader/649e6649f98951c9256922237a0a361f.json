{"remainingRequest":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IdeaProjects\\HIS\\HIS-web\\src\\views\\outpatient\\maintain\\frequse.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\src\\views\\outpatient\\maintain\\frequse.vue","mtime":1596785876400},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {selectByType,addfre,delfre} from '@/api/outpatient/frequentuse'\r\nimport {getdrugList} from '@/api/drug'\r\nimport {getNondrugList} from '@/api/non_drug'\r\nimport {getDmsDislist} from '@/api/diagnosis'\r\nimport Pagination from '@/components/Pagination'\r\nexport default {\r\n  components: {Pagination},\r\n  data(){\r\n    return{\r\n      searchitem:'',\r\n      loadItemList:false,\r\n      frequent:{\r\n        type: 6\r\n      },\r\n      freqlist:[],\r\n      itemlist:[],\r\n      itemvisible:false,\r\n      total:0,\r\n      page:{\r\n        pageSize:10,\r\n        pageNum:1\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.selectByType()\r\n  },\r\n  methods: {\r\n    delitem(val){\r\n      this.$confirm('确认将 '+val.name+' 从常用项删除?', '警告', {\r\n        confirmButtonText: '确认',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(()=>{\r\n        this.loadItemList = true\r\n        let data  = {}\r\n        data.deleteId = val.id\r\n        if(this.frequent.type===7)\r\n          data.deleteType = 6\r\n        else\r\n          data.deleteType = this.frequent.type\r\n        data.staffId = this.$store.getters.id\r\n        delfre(data).then(res=>{\r\n          this.$notify({\r\n            title: '成功',\r\n            message: res.message,\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n          this.selectByType()\r\n        })\r\n        this.loadItemList = false\r\n        this.itemvisible = false\r\n      })\r\n    },\r\n    selectItem(val){\r\n      this.$confirm('确认将 '+val.name+' 加入常用项?', '警告', {\r\n        confirmButtonText: '确认',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(()=>{\r\n        this.loadItemList = true\r\n        let data  = {}\r\n        data.addId = val.id\r\n        if(this.frequent.type===7)\r\n          data.addType = 6\r\n        else\r\n          data.addType = this.frequent.type\r\n        data.staffId = this.$store.getters.id\r\n        addfre(data).then(res=>{\r\n          this.$notify({\r\n            title: '成功',\r\n            message: res.message,\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n          this.selectByType()\r\n        })\r\n        this.loadItemList = false\r\n        this.itemvisible = false\r\n      })\r\n    },\r\n    showitemlist(){\r\n\r\n      let data ={}\r\n      data.name = this.searchitem\r\n      this.itemvisible = true\r\n      if(this.frequent.type===6){\r\n        data.typeId = 101\r\n        data.pageSize = this.page.pageSize\r\n        data.pageNum = this.page.pageNum\r\n        getdrugList(data).then(res=>{\r\n          this.itemlist = res.data.list\r\n          this.total = res.data.total\r\n        })\r\n      }\r\n      else if(this.frequent.type===7){\r\n        data.typeId = 103\r\n        data.pageSize = this.page.pageSize\r\n        data.pageNum = this.page.pageNum\r\n        getdrugList(data).then(res=>{\r\n          this.itemlist = res.data.list\r\n          this.total = res.data.total\r\n        })\r\n      }\r\n      else if(this.frequent.type===1){\r\n        data.recordType = 1\r\n        data.pageSize = this.page.pageSize\r\n        data.pageNum = this.page.pageNum\r\n        getNondrugList(data).then(res=>{\r\n          this.itemlist = res.data.list\r\n          this.total = res.data.total\r\n        })\r\n      }\r\n      else if(this.frequent.type===4){\r\n        data.recordType = 2\r\n        data.pageSize = this.page.pageSize\r\n        data.pageNum = this.page.pageNum\r\n        getNondrugList(data).then(res=>{\r\n          this.itemlist = res.data.list\r\n          this.total = res.data.total\r\n        })\r\n      }\r\n      else if(this.frequent.type===3){\r\n        data.recordType = 3\r\n        data.pageSize = this.page.pageSize\r\n        data.pageNum = this.page.pageNum\r\n        getNondrugList(data).then(res=>{\r\n          this.itemlist = res.data.list\r\n          this.total = res.data.total\r\n        })\r\n      }\r\n      else if(this.frequent.type===2){\r\n        data.recordType = 2\r\n        data.pageSize = this.page.pageSize\r\n        data.pageNum = this.page.pageNum\r\n        getDmsDislist(data).then(res=>{\r\n          this.itemlist = res.data.list\r\n          this.total = res.data.total\r\n        })\r\n      }\r\n    },\r\n    selectByType(){\r\n      let data ={}\r\n      let flag = 1\r\n      data.staffId = this.$store.getters.id\r\n      data.selectType = this.frequent.type\r\n      if(data.selectType===7){\r\n        data.selectType = 6\r\n        flag = 0\r\n      }\r\n      selectByType(data).then(res=>{\r\n        if(this.frequent.type===6){\r\n          this.freqlist = res.data.drugList.filter(item=>{\r\n            if(item.typeId===101||item.typeId===102){\r\n              return true\r\n            }\r\n            return false\r\n          })\r\n        }\r\n        else if(flag===0){\r\n          this.freqlist = res.data.drugList.filter(item=>{\r\n            if(item.typeId===103){\r\n              return true\r\n            }\r\n            return false\r\n          })\r\n        }\r\n        else if(this.frequent.type===1){\r\n          this.freqlist = res.data.checkList\r\n        }\r\n        else if(this.frequent.type===2){\r\n          this.freqlist = res.data.medicineDiseList\r\n        }\r\n        else if(this.frequent.type===3){\r\n          this.freqlist = res.data.dispositionList\r\n        }\r\n        else if(this.frequent.type===4){\r\n          this.freqlist = res.data.testList\r\n        }\r\n      })\r\n    }\r\n  },\r\n}\r\n",null]}