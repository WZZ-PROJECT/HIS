{"remainingRequest":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IdeaProjects\\HIS\\HIS-web\\src\\views\\admin\\diagnosis.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\src\\views\\admin\\diagnosis.vue","mtime":1596785876389},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {getDmscatlist,getDmsDislist,createDmsDiscat,delDmsDiscat,editDmsDiscat,createDmsDis,editDmsDis,delDmsDis} from '@/api/diagnosis'\r\nimport Pagination from '@/components/Pagination'\r\nexport default {\r\n  components: {Pagination},\r\n  data(){\r\n    return{\r\n      onedis:{\r\n        status:1,\r\n        catId:'',\r\n        code:'',\r\n        name:'',\r\n        icd:''\r\n      },\r\n      disload:false,\r\n      dialogVisibleDis:false,\r\n      catload:true,\r\n      catchange:{\r\n        name:'',\r\n        status:1\r\n      },\r\n      dialogType:'',\r\n      dialogVisible:false,\r\n      search:'',\r\n      catedit:false,\r\n      total:0,\r\n      iseditCat:false,\r\n      listQuery: {\r\n        catId: '',\r\n        code: '',\r\n        name: '',\r\n        icd: '',\r\n        status: '',\r\n        pageSize: 10,\r\n        pageNum: 1\r\n      },\r\n      dis:[],\r\n      menus:[],\r\n      currentRow:{\r\n        id:'',\r\n        name:\"请点击左侧选择诊断类别\",\r\n        status:1\r\n      }\r\n    };\r\n  },\r\n  created() {\r\n    this.getMenu()\r\n  },\r\n  methods:{\r\n    async getDis(){\r\n      const res = await getDmsDislist(this.listQuery)\r\n      this.dis = res.data.list\r\n      this.total = res.data.total\r\n    },\r\n    async getMenu(){\r\n      this.catload=true\r\n      const res=await getDmscatlist()\r\n      this.menus = res.data\r\n      this.catload=false\r\n    },\r\n    async handleCurrentChange(val) {\r\n        this.listQuery.catId = val.id\r\n        const res = await getDmsDislist(this.listQuery)\r\n        this.dis = res.data.list\r\n        this.total = res.data.total\r\n        this.currentRow=val\r\n    },\r\n    async getDisList(){\r\n      this.disload=true\r\n      const res = await getDmsDislist(this.listQuery)\r\n      this.dis = res.data.list\r\n      this.total = res.data.total\r\n      this.disload=false\r\n    },\r\n    delDmsDis(row){\r\n      this.$confirm('确认删除当前疾病?', '警告', {\r\n        confirmButtonText: '确认',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(()=>{\r\n        delDmsDis(row.id).then(res=>{\r\n          this.$notify({\r\n            title: '已删除',\r\n            message: res.message,\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n          this.getDisList()\r\n        })\r\n      })\r\n    },\r\n    changeDmsDis(){\r\n      if(this.dialogType==='edit'){\r\n        editDmsDis(this.onedis).then(res=>{\r\n          this.$notify({\r\n            title: '成功',\r\n            message: res.message,\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n          this.getDisList()\r\n        this.dialogVisibleDis=false\r\n        })\r\n        \r\n      }\r\n      else{\r\n        createDmsDis(this.onedis).then(res=>{\r\n          this.$notify({\r\n          title: '成功',\r\n          message: res.message,\r\n          type: 'success',\r\n          duration: 2000\r\n        })\r\n        this.getDisList()\r\n        this.dialogVisibleDis=false\r\n        })\r\n      }\r\n    },\r\n    changeDmsDiscat(){\r\n      if(this.dialogType==='edit'){\r\n        this.catchange.id = this.currentRow.id\r\n        this.currentRow.name = this.catchange.name\r\n        editDmsDiscat(this.catchange).then(res=>{\r\n          this.$notify({\r\n          title: '成功',\r\n          message: res.message,\r\n          type: 'success',\r\n          duration: 2000\r\n        })\r\n        })\r\n        this.dialogVisible=false\r\n      }\r\n      else{\r\n      createDmsDiscat(this.catchange).then(res=>{\r\n          this.$notify({\r\n          title: '成功',\r\n          message: res.message,\r\n          type: 'success',\r\n          duration: 2000\r\n        })\r\n        this.getMenu()\r\n      this.dialogVisible=false\r\n      })\r\n      }\r\n    },\r\n    delDmsDiscat(){\r\n      this.$confirm('确认删除当前目录?', '警告', {\r\n        confirmButtonText: '确认',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(()=>{\r\n          delDmsDiscat(this.currentRow.id).then(res=>{\r\n          this.$notify({\r\n            title: '已删除',\r\n            message: res.message,\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n          this.currentRow.name=''\r\n          this.dis=[]\r\n          this.getMenu()\r\n        })\r\n      })\r\n     \r\n    }\r\n  }\r\n}\r\n",null]}