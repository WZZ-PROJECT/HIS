{"remainingRequest":"F:\\XM\\his-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\XM\\his-web\\src\\views\\admin\\diagnosis.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\XM\\his-web\\src\\views\\admin\\diagnosis.vue","mtime":1601367472581},{"path":"F:\\XM\\his-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600936410370},{"path":"F:\\XM\\his-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1600936408645},{"path":"F:\\XM\\his-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1600936410370},{"path":"F:\\XM\\his-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1600936442292}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {getDmscatlist,getDmsDislist,createDmsDiscat,delDmsDiscat,editDmsDiscat,createDmsDis,editDmsDis,delDmsDis} from '@/api/diagnosis'\nimport Pagination from '@/components/Pagination'\nexport default {\n  components: {Pagination},\n  data(){\n    return{\n      onedis:{\n        status:1,\n        catId:'',\n        code:'',\n        name:'',\n        icd:''\n      },\n      disload:false,\n      dialogVisibleDis:false,\n      catload:true,\n      catchange:{\n        name:'',\n        status:1\n      },\n      dialogType:'',\n      dialogVisible:false,\n      search:'',\n      catedit:false,\n      total:0,\n      menuTotal:0,\n      iseditCat:false,\n      menuListQuery: {\n        name: '',\n        pageSize:10,\n        pageNum:1\n      },\n      listQuery: {\n        catId: '',\n        code: '',\n        name: '',\n        icd: '',\n        status: '',\n        pageSize: 10,\n        pageNum: 1\n      },\n      dis:[],\n      menus:[],\n      currentRow:{\n        id:'',\n        name:\"请点击左侧选择诊断类别\",\n        status:1\n      }\n    };\n  },\n  created() {\n    this.getMenu()\n  },\n  methods:{\n    async getDis(){\n      const res = await getDmsDislist(this.listQuery)\n      this.dis = res.data.list\n      this.total = res.data.total\n    },\n    async getMenu(){\n      this.catload=true\n      const res=await getDmscatlist(this.menuListQuery)\n      this.menus = res.data.list\n      this.menuTotal = res.data.total\n      this.catload=false\n    },\n    async handleCurrentChange(val) {\n        this.listQuery.catId = val.id\n        const res = await getDmsDislist(this.listQuery)\n        this.dis = res.data.list\n        this.total = res.data.total\n        this.currentRow=val\n    },\n    async getDisList(){\n      this.disload=true\n      const res = await getDmsDislist(this.listQuery)\n      this.dis = res.data.list\n      this.total = res.data.total\n      this.disload=false\n    },\n    delDmsDis(row){\n      this.$confirm('确认删除当前疾病?', '警告', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(()=>{\n        delDmsDis(row.id).then(res=>{\n          this.$notify({\n            title: '已删除',\n            message: res.message,\n            type: 'success',\n            duration: 2000\n          })\n          this.getDisList()\n        })\n      })\n    },\n    changeDmsDis(){\n      if(this.dialogType==='edit'){\n        editDmsDis(this.onedis).then(res=>{\n          this.$notify({\n            title: '成功',\n            message: res.message,\n            type: 'success',\n            duration: 2000\n          })\n          this.getDisList()\n        this.dialogVisibleDis=false\n        })\n\n      }\n      else{\n        console.log(this.onedis)\n        createDmsDis(this.onedis).then(res=>{\n          this.$notify({\n          title: '成功',\n          message: res.message,\n          type: 'success',\n          duration: 2000\n        })\n        this.getDisList()\n        this.dialogVisibleDis=false\n        })\n      }\n    },\n    changeDmsDiscat(){\n      if(this.dialogType==='edit'){\n        this.catchange.id = this.currentRow.id\n        this.currentRow.name = this.catchange.name\n        editDmsDiscat(this.catchange).then(res=>{\n          this.$notify({\n          title: '成功',\n          message: res.message,\n          type: 'success',\n          duration: 2000\n        })\n        })\n        this.dialogVisible=false\n      }\n      else{\n      createDmsDiscat(this.catchange).then(res=>{\n          this.$notify({\n          title: '成功',\n          message: res.message,\n          type: 'success',\n          duration: 2000\n        })\n        this.getMenu()\n      this.dialogVisible=false\n      })\n      }\n    },\n    delDmsDiscat(){\n      this.$confirm('确认删除当前目录?', '警告', {\n        confirmButtonText: '确认',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(()=>{\n          delDmsDiscat(this.currentRow.id).then(res=>{\n          this.$notify({\n            title: '已删除',\n            message: res.message,\n            type: 'success',\n            duration: 2000\n          })\n          this.currentRow.name=''\n          this.dis=[]\n          this.getMenu()\n        })\n      })\n\n    },\n    getDeplist(){\n      this.dialogVisible=false;\n      this.dialogVisibleDis=false;\n      this.onedis = {}\n    }\n  }\n}\n",null]}