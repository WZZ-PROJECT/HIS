{"remainingRequest":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IdeaProjects\\HIS\\HIS-web\\src\\views\\outpatient\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\src\\views\\outpatient\\index.vue","mtime":1596785876399},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport Record from './workstation/record'\r\nimport Inspection from './workstation/inspection'\r\nimport Examine from './workstation/examine'\r\nimport Prescription from './workstation/prescription'\r\nimport Handle from './workstation/handle'\r\nimport Comfirm from './workstation/confirm'\r\nimport Cprescription from './workstation/Cprescription'\r\nimport Bill from './workstation/bill'\r\nimport {getPatientList,bindPatient,startDiagnosis} from '@/api/outpatient/patient'\r\nimport {endDiagnosis,getnonend} from '@/api/outpatient/dmscase'\r\nimport { deepClone } from '@/utils'\r\nimport { truncate } from 'fs';\r\n  export default{\r\n    components: {Record,Inspection,Examine,Prescription,Handle,Comfirm,Cprescription,Bill},\r\n    data(){\r\n      return{\r\n        comfirmdisabled:true,\r\n        firstdisabled:true,\r\n        mask:true,\r\n        loaddepp:true,\r\n        patient:{},\r\n        deptWaitList:[],\r\n        personalDuringList:[],\r\n        personalEndList:[],\r\n        personalWaitList:[],\r\n        defaultProps: {\r\n          children: 'children',\r\n          label: 'label'\r\n        },\r\n        mouldname:'',\r\n        dialog1: false,\r\n        dialog2: false,\r\n        search:'',\r\n        isaside: true,\r\n        activeName: 'first',\r\n        activeName2: 'first',\r\n      };\r\n    },\r\n    created(){\r\n      this.getPatientList()\r\n    },\r\n    methods: {\r\n      comfirmdms(){\r\n        getnonend(this.patient.registrationId).then(res=>{\r\n          this.comfirmdisabled = true\r\n          if(res.data.dmsCaseHistoryList.length!==0){\r\n            this.activeName2 = 'second'\r\n            if(res.data.dmsCaseHistoryList[0].status===2){\r\n              this.comfirmdisabled = false\r\n              this.activeName2 = 'fiveth'\r\n            }\r\n            this.firstdisabled = false\r\n            \r\n          }\r\n          else{\r\n            this.firstdisabled = true\r\n            this.activeName2 = 'first'\r\n          }\r\n          this.patient = val\r\n          this.$refs.record.controlfast()\r\n        })\r\n      },\r\n      priliminary(){\r\n        getnonend(this.patient.registrationId).then(res=>{\r\n          this.comfirmdisabled = true\r\n          if(res.data.dmsCaseHistoryList.length!==0){\r\n            if(res.data.dmsCaseHistoryList[0].status===2){\r\n              this.comfirmdisabled = false\r\n              this.activeName2 = 'fiveth'\r\n            }\r\n            this.firstdisabled = false\r\n            this.activeName2 = 'second'\r\n          }\r\n          else{\r\n            this.firstdisabled = true\r\n            this.activeName2 = 'first'\r\n          }\r\n          this.patient = val\r\n          this.$refs.record.controlfast()\r\n        })\r\n      },\r\n      endDiagnosis(){\r\n        endDiagnosis(this.patient.registrationId).then(res=>{\r\n          this.$notify({\r\n            title: '成功',\r\n            message: '已诊毕！',\r\n            type: 'success',\r\n            duration: 2000\r\n          })\r\n          this.showaside()\r\n          this.getPatientList()\r\n        })\r\n      },\r\n      continuing(val){\r\n          this.$confirm('确认继续诊断患者 '+val.patientName+'?', '就诊', {\r\n            confirmButtonText: '确认',\r\n            cancelButtonText: '取消',\r\n            type: 'success'\r\n          }).then(()=>{\r\n            getnonend(val.registrationId).then(res=>{\r\n              this.comfirmdisabled = true\r\n              if(res.data.dmsCaseHistoryList.length!==0){\r\n                this.activeName2 = 'second'\r\n                if(res.data.dmsCaseHistoryList[0].status===2){\r\n                  this.comfirmdisabled = false\r\n                  this.activeName2 = 'fiveth'\r\n                }\r\n                this.firstdisabled = false\r\n                \r\n              }\r\n              else{\r\n                this.firstdisabled = true\r\n                this.activeName2 = 'first'\r\n              }\r\n              this.patient = val\r\n              this.showaside()\r\n              this.$refs.record.controlfast()\r\n            })\r\n          })\r\n        \r\n      },\r\n      bindPatient(val){\r\n          this.$confirm('确认绑定患者 '+val.patientName+'?', '就诊', {\r\n          confirmButtonText: '确认',\r\n          cancelButtonText: '取消',\r\n          type: 'success'\r\n        }).then(()=>{\r\n          \r\n          bindPatient(val.registrationId,this.$store.getters.id).then(res=>{\r\n            this.getPatientList()\r\n            this.$notify({\r\n              title: '成功',\r\n              message: '成功绑定该患者!',\r\n              type: 'success',\r\n              duration: 2000\r\n            })\r\n          })\r\n        })\r\n      },\r\n      async handleCurrentChange(val){\r\n        this.$confirm('确认开始诊断患者 '+val.patientName+'?', '就诊', {\r\n          confirmButtonText: '确认',\r\n          cancelButtonText: '取消',\r\n          type: 'success'\r\n        }).then(()=>{\r\n          startDiagnosis(val.registrationId).then(res=>{\r\n             this.$notify({\r\n              title: '成功',\r\n              message: '开始诊断',\r\n              type: 'success',\r\n              duration: 2000\r\n            })\r\n            this.patient = val\r\n            this.showaside()\r\n            this.$refs.record.controlfast()\r\n          })\r\n          \r\n        })\r\n        \r\n      },\r\n      async getPatientList(){\r\n        this.loaddepp = true\r\n        await getPatientList(this.$store.getters.id).then(res=>{\r\n          this.deptWaitList = res.data.deptWaitList\r\n          this.personalDuringList = res.data.personalDuringList\r\n          this.personalEndList = res.data.personalEndList\r\n          this.personalWaitList = res.data.personalWaitList\r\n          this.loaddepp = false\r\n        }).catch(err=>{\r\n          this.loaddepp = false\r\n        })\r\n      },\r\n      showaside(){\r\n        if(this.isaside===false){\r\n          this.isaside=true;\r\n          this.mask = true\r\n        }\r\n        else{\r\n          this.isaside = false\r\n          this.mask = false\r\n        }\r\n      },\r\n      storeRecord(){\r\n        this.dialog1=true;\r\n      }\r\n  }\r\n}\r\n",null]}