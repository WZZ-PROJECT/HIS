{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-84471246\"],{1:function(e,t){},1457:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"app-container\"},[a(\"div\",{staticClass:\"filter-container\"},[a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{placeholder:\"签章编码\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleFilter(t)}},model:{value:e.listQuery.code,callback:function(t){e.$set(e.listQuery,\"code\",t)},expression:\"listQuery.code\"}}),e._v(\" \"),a(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{placeholder:\"签章名称\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleFilter(t)}},model:{value:e.listQuery.name,callback:function(t){e.$set(e.listQuery,\"name\",t)},expression:\"listQuery.name\"}}),e._v(\" \"),a(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"130px\"},attrs:{placeholder:\"签章类型\",clearable:\"\",filterable:\"\"},model:{value:e.listQuery.type,callback:function(t){e.$set(e.listQuery,\"type\",t)},expression:\"listQuery.type\"}},e._l(e.allSignature,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),e._v(\" \"),a(\"el-button\",{directives:[{name:\"waves\",rawName:\"v-waves\"}],staticClass:\"filter-item\",attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleFilter}}),e._v(\" \"),a(\"el-button\",{staticClass:\"filter-item\",staticStyle:{\"margin-left\":\"10px\"},attrs:{type:\"primary\",icon:\"el-icon-edit\"},on:{click:e.handleAdd}},[e._v(\"\\n      新增签章\\n    \")]),e._v(\" \"),a(\"el-button\",{directives:[{name:\"waves\",rawName:\"v-waves\"}],staticClass:\"filter-item\",attrs:{loading:e.downloadLoading,type:\"danger\",icon:\"el-icon-download\"},on:{click:e.handleSomeDelete}},[e._v(\"\\n      批量删除\\n    \")])],1),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\",\"margin-top\":\"30px\"},attrs:{data:e.signatureList,border:\"\"},on:{\"selection-change\":e.changedep}},[a(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"code\",align:\"center\",label:\"签章编码\",width:\"220\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\"\\n        \"+e._s(t.row.code)+\"\\n      \")]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{align:\"center\",label:\"签章名称\",width:\"220\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\"\\n        \"+e._s(t.row.name)+\"\\n      \")]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{align:\"center\",label:\"签章类型\",width:\"220\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e._v(\"\\n        \"+e._s(t.row.typeName)+\"\\n      \")]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{align:\"center\",label:\"操作\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v(\"修改\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"danger\",size:\"small\"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v(\"删除\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\",size:\"small\"},on:{click:function(a){return e.handleEnable(t.row)}}},[e._v(\"启用\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"danger\",size:\"small\"},on:{click:function(a){return e.handleDisable(t.row)}}},[e._v(\"禁用\")])]}}])})],1),e._v(\" \"),a(\"el-dialog\",{attrs:{visible:e.dialogVisible,width:\"500px\",title:\"edit\"===e.dialogType?\"修改科室信息\":\"新增科室\"},on:{\"update:visible\":function(t){e.dialogVisible=t},close:e.getSignatureList}},[a(\"el-form\",{ref:\"depart\",attrs:{model:e.depart,\"label-width\":\"80px\",\"label-position\":\"left\",rules:e.rules}},[a(\"el-form-item\",{attrs:{label:\"签章编码\",prop:\"code\"}},[a(\"el-input\",{attrs:{placeholder:\"签章编码\"},model:{value:e.depart.code,callback:function(t){e.$set(e.depart,\"code\",t)},expression:\"depart.code\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"签章名称\",prop:\"name\"}},[a(\"el-input\",{attrs:{placeholder:\"签章名称\"},model:{value:e.depart.name,callback:function(t){e.$set(e.depart,\"name\",t)},expression:\"depart.name\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"签章类型\",prop:\"type\"}},[a(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"130px\"},attrs:{placeholder:\"签章类型\",clearable:\"\"},model:{value:e.depart.type,callback:function(t){e.$set(e.depart,\"type\",t)},expression:\"depart.type\"}},e._l(e.allSignature,(function(e){return a(\"el-option\",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(\" \"),a(\"div\",{staticStyle:{\"text-align\":\"right\"}},[a(\"el-button\",{attrs:{type:\"danger\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"取消\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.confirmDep(\"depart\")}}},[e._v(\"确认\")])],1)],1),e._v(\" \"),a(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.total>0,expression:\"total>0\"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{\"update:page\":function(t){return e.$set(e.listQuery,\"page\",t)},\"update:limit\":function(t){return e.$set(e.listQuery,\"limit\",t)},pagination:e.getSignatureList}})],1)},i=[],r=(a(\"96cf\"),a(\"1da1\")),l=(a(\"ac6a\"),a(\"5df3\"),a(\"df7c\"),a(\"ed08\"),a(\"d61e\")),s=a(\"3796\"),o=a(\"333d\"),c=a(\"4be7\"),u={id:\"\",code:\"\",name:\"\",type:\"\",state:\"\"},d={components:{Pagination:o[\"a\"],UploadExcelComponent:s[\"a\"]},data:function(){return{tableData:[],tableHeader:[],uploadVisible:!1,depart:Object.assign({},u),signatureList:[],dialogVisible:!1,dialogType:\"new\",checkStrictly:!1,defaultProps:{children:\"children\",label:\"title\"},total:0,listLoading:!0,allSignature:[],listQuery:{code:\"\",name:\"\",type:\"\",state:\"\",page:1,limit:20},downloadLoading:!1,rules:{code:[{required:!0,message:\"请输入签章编码\",trigger:\"blur\"}],name:[{required:!0,message:\"请输入签章名称\",trigger:\"blur\"}],type:[{required:!0,message:\"请选择签章类别\",trigger:\"blur\"}]},deplistref:[]}},computed:{},created:function(){c[\"Promise\"].all([this.selectType(),this.getSignatureList()])},methods:{beforeUpload:function(e){var t=e.size/1024/1024<1;return!!t||(this.$message({message:\"Please do not upload files larger than 1m in size.\",type:\"warning\"}),!1)},handleSuccess:function(e){var t=this,a=e.results,n=e.header;this.tableData=a,this.tableHeader=n,this.tableData.forEach((function(e){Object(l[\"a\"])(e).then((function(e){t.getSignatureList(),t.$notify({title:\"成功\",message:\"成功从Excel导入科室数据\",type:\"success\",duration:2e3}),t.uploadVisible=!1}))}))},selectType:function(){var e=Object(r[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l[\"e\"])();case 2:t=e.sent,this.allSignature=t.data;case 4:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getSignatureList:function(){var e=Object(r[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.listLoading=!0,e.next=3,Object(l[\"c\"])(this.listQuery);case 3:t=e.sent,this.signatureList=t.data.list,this.total=t.data.total,this.listLoading=!1;case 7:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAdd:function(){var e=this;this.resetTemp(),this.dialogType=\"new\",this.dialogVisible=!0,this.checkStrictly=!0,this.$nextTick((function(){e.$refs[\"depart\"].clearValidate()}))},handleEdit:function(e){var t=this;this.resetTemp(),this.depart=Object.assign({},e),this.dialogType=\"edit\",this.dialogVisible=!0,this.checkStrictly=!0,this.$nextTick((function(){t.$refs[\"depart\"].clearValidate()}))},confirmDep:function(){var e=Object(r[\"a\"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[t].validate((function(e){if(e){var t=\"edit\"===a.dialogType;a.listLoading=!0,t?(Object(l[\"f\"])(a.depart).then((function(e){a.getSignatureList(),a.$notify({title:\"成功\",message:\"已修改该签章信息\",type:\"success\",duration:2e3})})),a.dialogVisible=!1):(a.depart.state=2,Object(l[\"a\"])(a.depart).then((function(e){a.getSignatureList(),a.$notify({title:\"成功\",message:\"新增签章成功！\",type:\"success\",duration:2e3}),a.dialogVisible=!1})))}}));case 1:case\"end\":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this;this.$confirm(\"确认删除当前签章?\",\"警告\",{confirmButtonText:\"确认\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){Object(l[\"b\"])(e.id).then((function(e){t.$notify({title:\"成功\",message:\"已删除该签章\",type:\"success\",duration:2e3}),t.getSignatureList()}))}))},handleSomeDelete:function(){var e=this;this.$confirm(\"确认删除选中科室?\",\"警告\",{confirmButtonText:\"确认\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){for(var t=\"\",a=0;a<e.deplistref.length;a++)a!==e.deplistref.length-1?t=t+e.deplistref[a].id+\",\":t+=e.deplistref[a].id;Object(l[\"b\"])(t).then((function(t){e.$notify({title:\"成功\",message:\"删除成功\",type:\"success\",duration:2e3}),e.getSignatureList()}))}))},handleEnable:function(e){this.depart=Object.assign({},e),this.depart.state=1,this.handleDisableOrEnable(this.depart)},handleDisable:function(e){this.depart=Object.assign({},e),this.depart.state=2,this.handleDisableOrEnable(this.depart)},handleDisableOrEnable:function(e){var t=this;this.$confirm(\"确认启用或禁用当前签章?\",\"警告\",{confirmButtonText:\"确认\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){Object(l[\"f\"])(e).then((function(e){t.getSignatureList(),t.$notify({title:\"成功\",message:\"已启用或已禁用该签章\",type:\"success\",duration:2e3}),t.getSignatureList()}))}))},handleFilter:function(){this.listQuery.page=1,this.getSignatureList()},resetTemp:function(){this.depart.id=\"\",this.depart.name=\"\",this.depart.code=\"\",this.depart.type=\"\",this.depart.state=\"\"},formatJson:function(e,t){return t.map((function(t){return e.map((function(e){return\"timestamp\"===e?parseTime(t[e]):t[e]}))}))},changedep:function(e){this.deplistref=e}}},p=d,f=(a(\"c449\"),a(\"2877\")),h=Object(f[\"a\"])(p,n,i,!1,null,\"cc08ca86\",null);t[\"default\"]=h.exports},2:function(e,t){},\"27d1\":function(e,t,a){},3:function(e,t){},3796:function(e,t,a){\"use strict\";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"input\",{ref:\"excel-upload-input\",staticClass:\"excel-upload-input\",attrs:{type:\"file\",accept:\".xlsx, .xls\"},on:{change:e.handleClick}}),e._v(\" \"),a(\"div\",{staticClass:\"drop\",on:{drop:e.handleDrop,dragover:e.handleDragover,dragenter:e.handleDragover}},[e._v(\"\\n    选择Excel文件\\n    \"),a(\"el-button\",{staticStyle:{\"margin-left\":\"16px\"},attrs:{loading:e.loading,size:\"mini\",type:\"primary\"},on:{click:e.handleUpload}},[e._v(\"\\n      浏览\\n    \")])],1)])},i=[],r=(a(\"7f7f\"),a(\"1146\")),l=a.n(r),s={props:{beforeUpload:Function,onSuccess:Function},data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateData:function(e){var t=e.header,a=e.results;this.excelData.header=t,this.excelData.results=a,this.onSuccess&&this.onSuccess(this.excelData)},handleDrop:function(e){if(e.stopPropagation(),e.preventDefault(),!this.loading){var t=e.dataTransfer.files;if(1===t.length){var a=t[0];if(!this.isExcel(a))return this.$message.error(\"Only supports upload .xlsx, .xls, .csv suffix files\"),!1;this.upload(a),e.stopPropagation(),e.preventDefault()}else this.$message.error(\"Only support uploading one file!\")}},handleDragover:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect=\"copy\"},handleUpload:function(){this.$refs[\"excel-upload-input\"].click()},handleClick:function(e){var t=e.target.files,a=t[0];a&&this.upload(a)},upload:function(e){if(this.$refs[\"excel-upload-input\"].value=null,this.beforeUpload){var t=this.beforeUpload(e);t&&this.readerData(e)}else this.readerData(e)},readerData:function(e){var t=this;return this.loading=!0,new Promise((function(a,n){var i=new FileReader;i.onload=function(e){var n=e.target.result,i=l.a.read(n,{type:\"array\"}),r=i.SheetNames[0],s=i.Sheets[r],o=t.getHeaderRow(s),c=l.a.utils.sheet_to_json(s);t.generateData({header:o,results:c}),t.loading=!1,a()},i.readAsArrayBuffer(e)}))},getHeaderRow:function(e){var t,a=[],n=l.a.utils.decode_range(e[\"!ref\"]),i=n.s.r;for(t=n.s.c;t<=n.e.c;++t){var r=e[l.a.utils.encode_cell({c:t,r:i})],s=\"UNKNOWN \"+t;r&&r.t&&(s=l.a.utils.format_cell(r)),a.push(s)}return a},isExcel:function(e){return/\\.(xlsx|xls|csv)$/.test(e.name)}}},o=s,c=(a(\"3b66\"),a(\"2877\")),u=Object(c[\"a\"])(o,n,i,!1,null,\"ed85ac8e\",null);t[\"a\"]=u.exports},\"3b66\":function(e,t,a){\"use strict\";var n=a(\"db04\"),i=a.n(n);i.a},c449:function(e,t,a){\"use strict\";var n=a(\"27d1\"),i=a.n(n);i.a},db04:function(e,t,a){}}]);","extractedComments":[]}