{"remainingRequest":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\babel-loader\\lib\\index.js!D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\IdeaProjects\\HIS\\HIS-web\\src\\views\\permission\\role.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\src\\views\\permission\\role.vue","mtime":1596785876404},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\HIS\\HIS-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"D:/IdeaProjects/HIS/HIS-web/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"D:/IdeaProjects/HIS/HIS-web/node_modules/@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _user = require(\"@/api/user\");\n\nvar _utils = require(\"@/utils\");\n\nvar _department = require(\"@/api/department\");\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  components: {\n    Pagination: _Pagination.default\n  },\n  data: function data() {\n    return {\n      alldepart: [],\n      user: {\n        id: '',\n        username: '',\n        name: '',\n        role: '',\n        dept: '',\n        deptname: ''\n      },\n      total: 0,\n      userlist: [],\n      listQuery: {\n        deptId: '',\n        gender: '',\n        username: '',\n        roleId: '',\n        pageSize: 10,\n        pageNum: 1\n      },\n      dialogType: '',\n      dialogVisible: false\n    };\n  },\n  created: function created() {\n    this.select();\n    this.getAlldep();\n  },\n  methods: {\n    getAlldep: function () {\n      var _getAlldep = (0, _asyncToGenerator2.default)( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var res;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return (0, _department.getAllDep)();\n\n              case 2:\n                res = _context.sent;\n                this.alldepart = res.data;\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getAlldep() {\n        return _getAlldep.apply(this, arguments);\n      }\n\n      return getAlldep;\n    }(),\n    confirmUser: function confirmUser() {\n      var _this = this;\n\n      if (this.dialogType === 'add') {\n        this.user.deptId = this.user.dept;\n        this.user.roleId = this.user.role;\n        this.user.registrationRankId = 1;\n        this.user.gender = 0;\n        (0, _user.create)(this.user).then(function (res) {\n          _this.$notify({\n            title: '成功',\n            message: '成功新增用户',\n            type: 'success',\n            duration: 2000\n          });\n\n          _this.select();\n        });\n        this.dialogVisible = false;\n      } else {\n        this.user.deptId = this.user.dept;\n        this.user.roleId = this.user.role;\n        (0, _user.update)(this.user).then(function (res) {\n          _this.$notify({\n            title: '成功',\n            message: '修改成功',\n            type: 'success',\n            duration: 2000\n          });\n\n          _this.select();\n        });\n        this.dialogVisible = false;\n      }\n    },\n    select: function select() {\n      var _this2 = this;\n\n      (0, _user.select)(this.listQuery).then(function (res) {\n        _this2.userlist = res.data.list;\n        _this2.total = res.data.total;\n        console.log(_this2.userlist);\n\n        _this2.userlist.forEach(function (item) {\n          item.createTime = (0, _utils.parseTime)(item.createTime);\n        });\n      });\n    },\n    handleAddRole: function handleAddRole() {\n      this.user.id = '';\n      this.user.name = '';\n      this.user.role = '';\n      this.user.username = '';\n      this.user.dept = '';\n      this.dialogType = 'add';\n      this.dialogVisible = true;\n    },\n    handleEdit: function handleEdit(row) {\n      this.dialogType = 'edit';\n      this.user.id = row.id;\n      this.user.username = JSON.parse(JSON.stringify(row.username));\n      this.user.name = JSON.parse(JSON.stringify(row.name));\n      this.user.role = row.role.id;\n      this.user.dept = row.dept.id;\n      this.user.deptname = row.dept.name;\n      this.dialogVisible = true;\n      console.log(this.user);\n    }\n  }\n};\nexports.default = _default;",null]}