{"remainingRequest":"E:\\XM\\his-shopping-web\\node_modules\\babel-loader\\lib\\index.js!E:\\XM\\his-shopping-web\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\XM\\his-shopping-web\\src\\directive\\permission\\permission.js","dependencies":[{"path":"E:\\XM\\his-shopping-web\\src\\directive\\permission\\permission.js","mtime":1606183812508},{"path":"E:\\XM\\his-shopping-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\XM\\his-shopping-web\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"E:/XM/his-shopping-web/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nvar _store = _interopRequireDefault(require(\"@/store\"));\n\nvar _default = {\n  inserted: function inserted(el, binding, vnode) {\n    var value = binding.value;\n    var perms = _store.default.getters && _store.default.getters.perms;\n\n    if (value && value instanceof Array && value.length > 0) {\n      var permissions = value;\n      var hasPermission = false;\n\n      if (perms.indexOf('*') >= 0) {\n        hasPermission = true;\n      } else {\n        hasPermission = perms.some(function (perm) {\n          return permissions.includes(perm);\n        });\n      }\n\n      if (!hasPermission) {\n        el.parentNode && el.parentNode.removeChild(el);\n      }\n    } else {\n      throw new Error(\"need perms! Like v-permission=\\\"['GET /aaa','POST /bbb']\\\"\");\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["E:/XM/his-shopping-web/src/directive/permission/permission.js"],"names":["inserted","el","binding","vnode","value","perms","store","getters","Array","length","permissions","hasPermission","indexOf","some","perm","includes","parentNode","removeChild","Error"],"mappings":";;;;;;;;;;;;;AACA;;eAEc;AACZA,EAAAA,QADY,oBACHC,EADG,EACCC,OADD,EACUC,KADV,EACiB;AAAA,QACnBC,KADmB,GACTF,OADS,CACnBE,KADmB;AAE3B,QAAMC,KAAK,GAAGC,eAAMC,OAAN,IAAiBD,eAAMC,OAAN,CAAcF,KAA7C;;AAEA,QAAID,KAAK,IAAIA,KAAK,YAAYI,KAA1B,IAAmCJ,KAAK,CAACK,MAAN,GAAe,CAAtD,EAAyD;AACvD,UAAMC,WAAW,GAAGN,KAApB;AAEA,UAAIO,aAAa,GAAG,KAApB;;AAEA,UAAIN,KAAK,CAACO,OAAN,CAAc,GAAd,KAAsB,CAA1B,EAA6B;AAC3BD,QAAAA,aAAa,GAAG,IAAhB;AACD,OAFD,MAEO;AACLA,QAAAA,aAAa,GAAGN,KAAK,CAACQ,IAAN,CAAW,UAAAC,IAAI,EAAI;AACjC,iBAAOJ,WAAW,CAACK,QAAZ,CAAqBD,IAArB,CAAP;AACD,SAFe,CAAhB;AAGD;;AAED,UAAI,CAACH,aAAL,EAAoB;AAClBV,QAAAA,EAAE,CAACe,UAAH,IAAiBf,EAAE,CAACe,UAAH,CAAcC,WAAd,CAA0BhB,EAA1B,CAAjB;AACD;AACF,KAhBD,MAgBO;AACL,YAAM,IAAIiB,KAAJ,8DAAN;AACD;AACF;AAxBW,C","sourcesContent":["\r\nimport store from '@/store'\r\n\r\nexport default{\r\n  inserted(el, binding, vnode) {\r\n    const { value } = binding\r\n    const perms = store.getters && store.getters.perms\r\n\r\n    if (value && value instanceof Array && value.length > 0) {\r\n      const permissions = value\r\n\r\n      var hasPermission = false\r\n\r\n      if (perms.indexOf('*') >= 0) {\r\n        hasPermission = true\r\n      } else {\r\n        hasPermission = perms.some(perm => {\r\n          return permissions.includes(perm)\r\n        })\r\n      }\r\n\r\n      if (!hasPermission) {\r\n        el.parentNode && el.parentNode.removeChild(el)\r\n      }\r\n    } else {\r\n      throw new Error(`need perms! Like v-permission=\"['GET /aaa','POST /bbb']\"`)\r\n    }\r\n  }\r\n}\r\n"]}]}