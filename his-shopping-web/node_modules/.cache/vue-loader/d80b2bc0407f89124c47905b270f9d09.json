{"remainingRequest":"E:\\XM\\his-shopping-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\XM\\his-shopping-web\\src\\views\\promotion\\coupon.vue?vue&type=template&id=7aecdba8&","dependencies":[{"path":"E:\\XM\\his-shopping-web\\src\\views\\promotion\\coupon.vue","mtime":1606183812556},{"path":"E:\\XM\\his-shopping-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-web\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\XM\\his-shopping-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"app-container\">\n\n  <!-- 查询和其他操作 -->\n  <div class=\"filter-container\">\n    <el-input v-model=\"listQuery.name\" clearable class=\"filter-item\" style=\"width: 200px;\" placeholder=\"请输入优惠券标题\" />\n    <el-select v-model=\"listQuery.type\" clearable style=\"width: 200px\" class=\"filter-item\" placeholder=\"请选择优惠券类型\">\n      <el-option v-for=\"type in typeOptions\" :key=\"type.value\" :label=\"type.label\" :value=\"type.value\" />\n    </el-select>\n    <el-select v-model=\"listQuery.status\" clearable style=\"width: 200px\" class=\"filter-item\" placeholder=\"请选择优惠券状态\">\n      <el-option v-for=\"type in statusOptions\" :key=\"type.value\" :label=\"type.label\" :value=\"type.value\" />\n    </el-select>\n    <el-button v-permission=\"['GET /admin/coupon/list']\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">查找</el-button>\n    <el-button v-permission=\"['POST /admin/coupon/create']\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-edit\" @click=\"handleCreate\">添加</el-button>\n    <el-button :loading=\"downloadLoading\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-download\" @click=\"handleDownload\">导出</el-button>\n  </div>\n\n  <!-- 查询结果 -->\n  <el-table v-loading=\"listLoading\" :data=\"list\" element-loading-text=\"正在查询中。。。\" border fit highlight-current-row>\n\n    <el-table-column align=\"center\" label=\"优惠券ID\" prop=\"id\" sortable />\n\n    <el-table-column align=\"center\" label=\"优惠券名称\" prop=\"name\" />\n\n    <el-table-column align=\"center\" label=\"介绍\" prop=\"desc\" />\n\n    <el-table-column align=\"center\" label=\"标签\" prop=\"tag\" />\n\n    <el-table-column align=\"center\" label=\"最低消费\" prop=\"min\">\n      <template slot-scope=\"scope\">满{{ scope.row.min }}元可用</template>\n    </el-table-column>\n\n    <el-table-column align=\"center\" label=\"满减金额\" prop=\"discount\">\n      <template slot-scope=\"scope\">减免{{ scope.row.discount }}元</template>\n    </el-table-column>\n\n    <el-table-column align=\"center\" label=\"每人限领\" prop=\"limit\">\n      <template slot-scope=\"scope\">{{ scope.row.limit != 0 ? scope.row.limit : \"不限\" }}</template>\n    </el-table-column>\n\n    <el-table-column align=\"center\" label=\"商品使用范围\" prop=\"goodsType\">\n      <template slot-scope=\"scope\">{{ scope.row.goodsType | formatGoodsType }}</template>\n    </el-table-column>\n\n    <el-table-column align=\"center\" label=\"优惠券类型\" prop=\"type\">\n      <template slot-scope=\"scope\">{{ scope.row.type | formatType }}</template>\n    </el-table-column>\n\n    <el-table-column align=\"center\" label=\"优惠券数量\" prop=\"total\">\n      <template slot-scope=\"scope\">{{ scope.row.total != 0 ? scope.row.total : \"不限\" }}</template>\n    </el-table-column>\n\n    <el-table-column align=\"center\" label=\"状态\" prop=\"status\">\n      <template slot-scope=\"scope\">{{ scope.row.status | formatStatus }}</template>\n    </el-table-column>\n\n    <el-table-column align=\"center\" label=\"操作\" width=\"300\" class-name=\"small-padding fixed-width\">\n      <template slot-scope=\"scope\">\n        <el-button v-permission=\"['GET /admin/coupon/read']\" type=\"primary\" size=\"mini\" @click=\"handleDetail(scope.row)\">详情</el-button>\n        <el-button v-permission=\"['POST /admin/coupon/update']\" type=\"info\" size=\"mini\" @click=\"handleUpdate(scope.row)\">编辑</el-button>\n        <el-button v-permission=\"['POST /admin/coupon/delete']\" type=\"danger\" size=\"mini\" @click=\"handleDelete(scope.row)\">删除</el-button>\n      </template>\n    </el-table-column>\n  </el-table>\n\n  <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.page\" :limit.sync=\"listQuery.limit\" @pagination=\"getList\" />\n\n  <!-- 添加或修改对话框 -->\n  <el-dialog :title=\"textMap[dialogStatus]\" :visible.sync=\"dialogFormVisible\">\n    <el-form ref=\"dataForm\" :rules=\"rules\" :model=\"dataForm\" status-icon label-position=\"left\" label-width=\"100px\" style=\"width: 400px; margin-left:50px;\">\n      <el-form-item label=\"优惠券名称\" prop=\"name\">\n        <el-input v-model=\"dataForm.name\" />\n      </el-form-item>\n      <el-form-item label=\"介绍\" prop=\"desc\">\n        <el-input v-model=\"dataForm.desc\" />\n      </el-form-item>\n      <el-form-item label=\"标签\" prop=\"tag\">\n        <el-input v-model=\"dataForm.tag\" />\n      </el-form-item>\n      <el-form-item label=\"最低消费\" prop=\"min\">\n        <el-input v-model=\"dataForm.min\">\n          <template slot=\"append\">元</template>\n        </el-input>\n      </el-form-item>\n      <el-form-item label=\"满减金额\" prop=\"discount\">\n        <el-input v-model=\"dataForm.discount\">\n          <template slot=\"append\">元</template>\n        </el-input>\n      </el-form-item>\n      <el-form-item label=\"每人限领\" prop=\"limit\">\n        <el-input v-model=\"dataForm.limit\">\n          <template slot=\"append\">张</template>\n        </el-input>\n      </el-form-item>\n      <el-form-item label=\"分发类型\" prop=\"type\">\n        <el-select v-model=\"dataForm.type\">\n          <el-option\n            v-for=\"type in typeOptions\"\n            :key=\"type.value\"\n            :label=\"type.label\"\n            :value=\"type.value\"\n          />\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"优惠券数量\" prop=\"total\">\n        <el-input v-model=\"dataForm.total\">\n          <template slot=\"append\">张</template>\n        </el-input>\n      </el-form-item>\n      <el-form-item label=\"有效期\">\n        <el-radio-group v-model=\"dataForm.timeType\">\n          <el-radio-button :label=\"0\">领券相对天数</el-radio-button>\n          <el-radio-button :label=\"1\">指定绝对时间</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item v-show=\"dataForm.timeType === 0\">\n        <el-input v-model=\"dataForm.days\">\n          <template slot=\"append\">天</template>\n        </el-input>\n      </el-form-item>\n      <el-form-item v-show=\"dataForm.timeType === 1\">\n        <el-col :span=\"11\">\n          <el-date-picker v-model=\"dataForm.startTime\" type=\"datetime\" placeholder=\"选择日期\" value-format=\"yyyy-MM-dd HH:mm:ss\" style=\"width: 100%;\" />\n        </el-col>\n        <el-col :span=\"2\" class=\"line\">至</el-col>\n        <el-col :span=\"11\">\n          <el-date-picker v-model=\"dataForm.endTime\" type=\"datetime\" placeholder=\"选择日期\" value-format=\"yyyy-MM-dd HH:mm:ss\" style=\"width: 100%;\" />\n        </el-col>\n      </el-form-item>\n      <el-form-item label=\"商品限制范围\">\n        <el-radio-group v-model=\"dataForm.goodsType\">\n          <el-radio-button :label=\"0\">全场通用</el-radio-button>\n          <el-radio-button :label=\"1\">指定分类</el-radio-button>\n          <el-radio-button :label=\"2\">指定商品</el-radio-button>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item v-show=\"dataForm.goodsType === 1\">\n        <el-cascader\n          v-model=\"selectGoodsCategory\"\n          clearable\n          placeholder=\"请选择分类名称\"\n          :options=\"goodsCategoryOptions\"\n        />\n        <el-button @click=\"handleAddGoodsCategory()\">添加</el-button>\n        <el-table\n          ref=\"goodsCateRelationTable\"\n          :data=\"couponCategoryList\"\n          style=\"width: 100%;margin-top: 20px\"\n          border\n        >\n          <el-table-column label=\"分类名称\" align=\"center\">\n            <template slot-scope=\"scope\">{{ scope.row.parentCategoryName }}>{{ scope.row.goodsCategoryName }}</template>\n          </el-table-column>\n          <el-table-column label=\"操作\" align=\"center\" width=\"100\">\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                @click=\"handleDeleteGoodsCategory(scope.$index, scope.row)\"\n              >删除\n              </el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-form-item>\n      <el-form-item v-show=\"dataForm.goodsType === 2\">\n        <el-select\n          v-model=\"selectGoods\"\n          filterable\n          remote\n          reserve-keyword\n          placeholder=\"商品名称/商品货号\"\n        >\n          <el-option\n            v-for=\"item in goodsOptions\"\n            :key=\"item.goodsId\"\n            :label=\"item.goodsName\"\n            :value=\"item.goodsId\"\n          >\n            <span style=\"float: left\">{{ item.goodsName }}</span>\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">NO.{{ item.goodsSn }}</span>\n          </el-option>\n        </el-select>\n        <el-button @click=\"handleAddGoods()\">添加</el-button>\n        <el-table\n          ref=\"goodsRelationTable\"\n          :data=\"couponGoodsList\"\n          style=\"width: 100%;margin-top: 20px\"\n          border\n        >\n          <el-table-column label=\"商品名称\" align=\"center\">\n            <template slot-scope=\"scope\">{{ scope.row.goodsName }}</template>\n          </el-table-column>\n          <el-table-column label=\"商品编号\" align=\"center\" width=\"80\">\n            <template slot-scope=\"scope\">{{ scope.row.goodsSn }}</template>\n          </el-table-column>\n          <el-table-column label=\"操作\" align=\"center\" width=\"60\">\n            <template slot-scope=\"scope\">\n              <el-button\n                size=\"mini\"\n                type=\"text\"\n                @click=\"handleDeleteGoods(scope.$index, scope.row)\"\n              >删除\n              </el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-form-item>\n    </el-form>\n    <div slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogFormVisible = false\">取消</el-button>\n      <el-button v-if=\"dialogStatus=='create'\" type=\"primary\" @click=\"createData\">确定</el-button>\n      <el-button v-else type=\"primary\" @click=\"updateData\">确定</el-button>\n    </div>\n  </el-dialog>\n\n</div>\n",null]}